/**
 * Created by abhi on 25/8/14.
 */
function roundToWithThousands(e,t,n){var r=1*unFormat(e,t);if(typeof r=="number"&&n!="none"){if(n<=0){var i=-n;r=+(Math.round(r+"e+"+i)+"e-"+i)}else{var i=n;var s="1e+"+i;r=+Math.round(r/s)*s}}r=fmtChartJS(e,r,"none");return r}function unFormat(e,t){if((e.decimalSeparator!="."||e.thousandSeparator!="")&&typeof t=="string"){var n=""+t;if(e.thousandSeparator!=""){while(n.indexOf(e.thousandSeparator)>=0)n=""+n.replace(e.thousandSeparator,"")}if(e.decimalSeparator!=".")n=""+n.replace(e.decimalSeparator,".");return 1*n}else{return t}}function fmtChartJSPerso(e,t,n){switch(n){case"SampleJS_Format":if(typeof t=="number")return_value="My Format : "+t.toString()+" $";else return_value=t+"XX";break;case"Change_Month":if(typeof t=="string")return_value=t.toString()+" 2014";else return_value=t.toString()+"YY";break;default:return_value=t;break}return return_value}function fmtChartJS(e,t,n){var r;if(n=="notformatted"){r=t}else if(n=="none"&&typeof t=="number"){if(e.roundNumber!="none"){if(e.roundNumber<=0){var i=-e.roundNumber;t=+(Math.round(t+"e+"+i)+"e-"+i)}else{var i=e.roundNumber;var s="1e+"+i;t=+Math.round(t/s)*s}}if(e.decimalSeparator!="."||e.thousandSeparator!=""){r=t.toString().replace(/\./g,e.decimalSeparator);if(e.thousandSeparator!=""){var o=r;var u="";var a=o.indexOf(e.decimalSeparator);if(a>=0){u=o.substring(a+1,o.length);u=u.split("").reverse().join("");o=o.substring(0,a)}o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e.thousandSeparator);u=u.split("").reverse().join("");r=o;if(u!="")r=r+e.decimalSeparator+u}}else r=t}else if(n!="none"&&n!="notformatted"){r=fmtChartJSPerso(e,t,n)}else{r=t}return r}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};dif=false;if(fctName.substr(-3)=="Dif"){fctName=fctName.substr(0,fctName.length-3);dif=true}if(typeof eval(fctName)=="function"){var parameter=eval(fctList+"."+fctName);if(dif){return data.v3-window[fctName](parameter)}return window[fctName](parameter)}return}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function tmplbis(e,t){var n=["mean","varianz","stddev","cv","median"];var r=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+n.join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");while(r.test(e)){e=e.replace(r,function(e,n,r,i,s){if(i){var o=i}else{var o=2}var u=addParameters2Function(t,r,"mathFunctions");if(isNumber(u)){return"<%="+n+""+Math.round(Math.pow(10,o)*u)/Math.pow(10,o)+""+s+"%>"}return"<%= %>"})}var i=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e)?cachebis[e]=cachebis[e]||tmplbis(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+e.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return t?i(t):i}function createCursorDiv(){if(cursorDivCreated==false){var e=document.createElement("divCursor");e.id="divCursor";e.style.position="absolute";document.body.appendChild(e);cursorDivCreated=true}}function checkBrowser(){this.ver=navigator.appVersion;this.dom=document.getElementById?1:0;this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0;this.ie4=document.all&&!this.dom?1:0;this.ns5=this.dom&&parseInt(this.ver)>=5?1:0;this.ns4=document.layers&&!this.dom?1:0;this.bw=this.ie5||this.ie4||this.ns4||this.ns5;return this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop";if(bw.ns4)document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(obj,nest){createCursorDiv();nest=!nest?"":"document."+nest+".";this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0;this.moveIt=b_moveIt;cursorInit();return this}function b_moveIt(e,t){this.x=e;this.y=t;this.css.left=this.x+"px";this.css.top=this.y+"px"}function isIE(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!=-1?parseInt(e.split("msie")[1]):false}function mergeChartConfig(e,t){var n={};for(var r in e){n[r]=e[r]}for(var r in t){n[r]=t[r]}return n}function sleep(e){var t=new Date;t.setTime(t.getTime()+e);while((new Date).getTime()<t.getTime()){}}function saveCanvas(e,t,n,r){cvSave=e.getImageData(0,0,e.canvas.width,e.canvas.height);var i={savePng:false,annotateDisplay:false,animation:false,dynamicDisplay:false};var s=mergeChartConfig(n,i);s.clearRect=false;switch(r){case"Bar":(new Chart(e.canvas.getContext("2d"))).Bar(t,s);break;case"Pie":(new Chart(e.canvas.getContext("2d"))).Pie(t,s);break;case"Doughnut":(new Chart(e.canvas.getContext("2d"))).Doughnut(t,s);break;case"Radar":(new Chart(e.canvas.getContext("2d"))).Radar(t,s);break;case"PolarArea":(new Chart(e.canvas.getContext("2d"))).PolarArea(t,s);break;case"HorizontalBar":(new Chart(e.canvas.getContext("2d"))).HorizontalBar(t,s);break;case"StackedBar":(new Chart(e.canvas.getContext("2d"))).StackedBar(t,s);break;case"HorizontalStackedBar":(new Chart(e.canvas.getContext("2d"))).HorizontalStackedBar(t,s);break;case"Line":(new Chart(e.canvas.getContext("2d"))).Line(t,s);break}if(n.savePngOuput=="NewWindow"){var o=e.canvas.toDataURL();e.putImageData(cvSave,0,0);window.open(o,"_blank")}if(n.savePngOuput=="CurrentWindow"){var o=e.canvas.toDataURL();e.putImageData(cvSave,0,0);window.location.href=o}if(n.savePngOuput=="Save"){document.location.href=e.canvas.toDataURL("image/png").replace("image/png","image/octet-stream");e.putImageData(cvSave,0,0)}}function dynamicFunction(e,t,n,r){if(t.dynamicDisplay){if(n.canvas.id==""){var i=new Date;var s=i.getTime();n.canvas.id="Canvas_"+s}if(typeof dynamicDisplay[n.canvas.id]=="undefined"){dynamicDisplayList[dynamicDisplayList["length"]]=n.canvas.id;dynamicDisplay[n.canvas.id]=[n.canvas,false,false,e,t,n.canvas,r];dynamicDisplay[n.canvas.id][1]=isScrolledIntoView(n.canvas);window.onscroll=scrollFunction}if(dynamicDisplay[n.canvas.id][1]==false||dynamicDisplay[n.canvas.id][2]==true)return false;dynamicDisplay[n.canvas.id][2]=true}return true}function isScrolledIntoView(e){var t=0;var n=0;elem=e;while(elem){t+=elem.offsetLeft-elem.scrollLeft+elem.clientLeft;n+=elem.offsetTop-elem.scrollTop+elem.clientTop;elem=elem.offsetParent}if(t+e.width/2>=window.pageXOffset&&t+e.width/2<=window.pageXOffset+window.innerWidth&&n+e.height/2>=window.pageYOffset&&n+e.height/2<=window.pageYOffset+window.innerHeight)return true;else return false}function scrollFunction(){for(var e=0;e<dynamicDisplayList["length"];e++){if(isScrolledIntoView(dynamicDisplay[dynamicDisplayList[e]][5])&&dynamicDisplay[dynamicDisplayList[e]][2]==false){dynamicDisplay[dynamicDisplayList[e]][1]=true;switch(dynamicDisplay[dynamicDisplayList[e]][6]){case"Bar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Bar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"Pie":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Pie(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"Doughnut":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Doughnut(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"Radar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Radar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"PolarArea":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).PolarArea(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"HorizontalBar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).HorizontalBar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"StackedBar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).StackedBar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"HorizontalStackedBar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).HorizontalStackedBar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"Line":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Line(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break}}}}function clearAnnotate(e){jsGraphAnnotate[e]=[]}function getMousePos(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function doMouseMove(ctx,config,event,data){var annotateDIV=document.getElementById("divCursor");show=false;annotateDIV.className=config.annotateClassName?config.annotateClassName:"";annotateDIV.style.border=config.annotateClassName?"":config.annotateBorder;annotateDIV.style.padding=config.annotateClassName?"":config.annotatePadding;annotateDIV.style.borderRadius=config.annotateClassName?"":config.annotateBorderRadius;annotateDIV.style.backgroundColor=config.annotateClassName?"":config.annotateBackgroundColor;annotateDIV.style.color=config.annotateClassName?"":config.annotateFontColor;annotateDIV.style.fontFamily=config.annotateClassName?"":config.annotateFontFamily;annotateDIV.style.fontSize=config.annotateClassName?"":config.annotateFontSize+"pt";annotateDIV.style.fontStyle=config.annotateClassName?"":config.annotateFontStyle;canvas_pos=getMousePos(ctx.canvas,event);for(i=0;i<jsGraphAnnotate[ctx.ChartNewId]["length"];i++){if(jsGraphAnnotate[ctx.ChartNewId][i][0]=="ARC"){distance=Math.sqrt((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])*(canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])+(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])*(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2]));if(distance>jsGraphAnnotate[ctx.ChartNewId][i][3]&&distance<jsGraphAnnotate[ctx.ChartNewId][i][4]){angle=Math.acos((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])/distance);if(canvas_pos.y<jsGraphAnnotate[ctx.ChartNewId][i][2])angle=-angle;while(angle<0){angle+=2*Math.PI}while(angle>2*Math.PI){angle-=2*Math.PI}if(angle<config.startAngle*(Math.PI/360))angle+=2*Math.PI;if(angle>jsGraphAnnotate[ctx.ChartNewId][i][5]&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]||angle>jsGraphAnnotate[ctx.ChartNewId][i][5]-2*Math.PI&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]-2*Math.PI||angle>jsGraphAnnotate[ctx.ChartNewId][i][5]+2*Math.PI&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]+2*Math.PI){v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV1);v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV2);v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV3);v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV4);v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV5);v6=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][8]/jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV6);v6=roundToWithThousands(config,v6,config.roundPct);v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV7);v8=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV8);v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV9);v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV10);v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV11);v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV12);v13=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][12],config.fmtV13);graphPosX=canvas_pos.x;graphPosY=canvas_pos.y;dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,v13:v13,graphPosX:graphPosX,graphPosY:graphPosY});annotateDIV.innerHTML=dispString;show=true;x=bw.ns4||bw.ns5?event.pageX:event.x;y=bw.ns4||bw.ns5?event.pageY:event.y;if(bw.ie4||bw.ie5)y=y+eval(scrolled);oCursor.moveIt(x+fromLeft,y+fromTop)}}}else if(jsGraphAnnotate[ctx.ChartNewId][i][0]=="RECT"){if(canvas_pos.x>jsGraphAnnotate[ctx.ChartNewId][i][1]&&canvas_pos.x<jsGraphAnnotate[ctx.ChartNewId][i][3]&&canvas_pos.y<jsGraphAnnotate[ctx.ChartNewId][i][2]&&canvas_pos.y>jsGraphAnnotate[ctx.ChartNewId][i][4]){v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV1);v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV2);v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV3);v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV4);v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV5);v6=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][7]/jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV6);v6=roundToWithThousands(config,v6,config.roundPct);v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV7);v8=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV8);v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV9);v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV10);v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV11);v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV12);graphPosX=canvas_pos.x;graphPosY=canvas_pos.y;dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY,data:data});annotateDIV.innerHTML=dispString;show=true;x=bw.ns4||bw.ns5?event.pageX:event.x;y=bw.ns4||bw.ns5?event.pageY:event.y;if(bw.ie4||bw.ie5)y=y+eval(scrolled);oCursor.moveIt(x+fromLeft,y+fromTop)}}else if(jsGraphAnnotate[ctx.ChartNewId][i][0]=="POINT"){distance=Math.sqrt((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])*(canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])+(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])*(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2]));if(distance<10){v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV1);v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV2);v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV3);v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV4);v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV5);v6=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV6);v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV7);v8=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][5]/jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV8);v8=roundToWithThousands(config,v8,config.roundPct);v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV9);v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV10);v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV11);v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV12);graphPosX=canvas_pos.x;graphPosY=canvas_pos.y;dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY,data:data});annotateDIV.innerHTML=dispString;show=true;x=bw.ns4||bw.ns5?event.pageX:event.x;y=bw.ns4||bw.ns5?event.pageY:event.y;if(bw.ie4||bw.ie5)y=y+eval(scrolled);oCursor.moveIt(x+fromLeft,y+fromTop)}}annotateDIV.style.display=show?"":"none"}}function animationCorrection(e,t,n,r,i,s){var o=e;var u=0;if(i!=-1){if(o<1&&r<n.animationStartWithDataset-1&&n.animationStartWithDataset-1!=-1){o=1}if(o<1&&i<n.animationStartWithData-1&&n.animationStartWithData-1!=-1){o=1}var a=1;var f=e;if(o<1&&n.animationByDataset){o=0;a=0;var l=n.animationStartWithDataset-1;if(n.animationStartWithDataset-1==-1)l=0;var c=n.animationSteps/(t.datasets.length-l);if(e>=(r-l+1)*c/n.animationSteps)o=1;else if(e>=(r-l)*c/n.animationSteps){var h=e-(r-l)*c/n.animationSteps;if(!n.animationLeftToRight){o=h*(t.datasets.length-l)}else{f=h*(t.datasets.length-l)}a=1}}if(a==1&&o<1&&n.animationLeftToRight){o=0;var p=n.animationStartWithData-1;if(n.animationStartWithData-1==-1)p=0;var d=n.animationSteps/(t.datasets[r].data.length-p-1+s);if(f>=(i-p)*d/n.animationSteps){o=1;if(f<=(i+1-p)*d/n.animationSteps){u=(t.datasets[r].data.length-p-1)*(f-(i-p)*d/n.animationSteps)}}}}else{if(o<1&&r<n.animationStartWithData-1){o=1}}return{mainVal:o,subVal:u,animVal:o+u}}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){"use strict";if(this==null){throw new TypeError}var t=Object(this);var n=t.length>>>0;if(n===0){return-1}var r=0;if(arguments.length>0){r=Number(arguments[1]);if(r!=r){r=0}else if(r!=0&&r!=Infinity&&r!=-Infinity){r=(r>0||-1)*Math.floor(Math.abs(r))}}if(r>=n){return-1}var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++){if(i in t&&t[i]===e){return i}}return-1}}var charJSPersonalDefaultOptions={};var charJSPersonalDefaultOptionsLine={};var charJSPersonalDefaultOptionsRadar={};var charJSPersonalDefaultOptionsPolarArea={};var charJSPersonalDefaultOptionsPie={};var charJSPersonalDefaultOptionsDoughnut={};var charJSPersonalDefaultOptionsBar={};var charJSPersonalDefaultOptionsStackedBar={};var charJSPersonalDefaultOptionsHorizontalBar={};var charJSPersonalDefaultOptionsHorizontalStackedBar={};var cachebis={};CanvasRenderingContext2D.prototype.fillTextMultiLine=function(e,t,n,r,i){var s=(""+e).split("\n");if(r=="middle"){n-=(s.length-1)/2*i}else if(r=="bottom"){n-=(s.length-1)*i}for(var o=0;o<s.length;o++){this.fillText(s[o],t,n);n+=i}};CanvasRenderingContext2D.prototype.measureTextMultiLine=function(e,t){var n=0;var r;var i=(""+e).split("\n");var s=i.length*t;for(var o=0;o<i.length;o++){r=this.measureText(i[o]).width;if(r>n)n=r}return{textWidth:n,textHeight:s}};cursorDivCreated=false;bw=new checkBrowser;fromLeft=10;fromTop=10;if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}var dynamicDisplay=new Array;var dynamicDisplayList=new Array;var jsGraphAnnotate=new Array;window.Chart=function(context){function reverseData(e){e.labels=e.labels.reverse();for(var t=0;t<e.datasets.length;t++){for(var n in e.datasets[t]){if(Array.isArray(e.datasets[t][n])){e.datasets[t][n]=e.datasets[t][n].reverse()}}}return e}function calculateOffset(e,t,n,r){if(!e.logarithmic){var i=n.steps*n.stepValue;var s=t-n.graphMin;var o=CapValue(s/i,1,0);return r*n.steps*o}else{return CapValue(log10(t)*r-calculateOrderOfMagnitude(n.graphMin)*r,undefined,0)}}function animationLoop(e,t,n,r,i,s,o,u,a,f,l,c,h){function E(){var d=e.animation?CapValue(g(y),null,0):1;if(1*p>=1*CapValue(e.animationSteps,Number.MAX_VALUE,1)||e.animation==false)d=1;else if(d>=1)d=.9999;if(e.animation&&!(isIE()<9&&isIE()!=false)&&e.clearRect)r.clearRect(i,s,o,u);dispCrossImage(r,e,a,f,l,c,false,h,d,p);dispCrossText(r,e,a,f,l,c,false,h,d,p);if(e.scaleOverlay){n(d);t()}else{t();n(d)}dispCrossImage(r,e,a,f,l,c,true,h,d,p);dispCrossText(r,e,a,f,l,c,true,h,d,p)}function S(){p+=v;y+=v*m;if(p==e.animationSteps||e.animation==false)y=1;else if(y>=1)y=.999;E();if(v==-1&&p<=b){if(typeof e.onAnimationComplete=="function")e.onAnimationComplete(r,e,h,0,d+1);v=1;requestAnimFrame(S)}else if(y<e.animationStopValue){requestAnimFrame(S)}else{if(typeof e.onAnimationComplete=="function")e.onAnimationComplete(r,e,h,1,d+1);if(d<e.animationCount||e.animationCount==0){d++;if(e.animationBackward&&v==1){y-=m;v=-1}else{v=1;p=b-1;y=w-m}window.setTimeout(S,2e3)}}}var p=0;var d=1;var v=1;if(e.animationStartValue<0||e.animationStartValue>1)e.animation.StartValue=0;if(e.animationStopValue<0||e.animationStopValue>1)e.animation.StopValue=1;if(e.animationStopValue<e.animationStartValue)e.animationStopValue=e.animationStartValue;if(isIE()<9&&isIE()!=false)e.animation=false;var m=e.animation?1/CapValue(e.animationSteps,Number.MAX_VALUE,1):1,g=animationOptions[e.animationEasing],y=e.animation?0:1;if(e.animation&&e.animationStartValue>0&&e.animationStartValue<=1){while(y<e.animationStartValue){p++;y+=m}}var b=p;var w=y;if(typeof t!=="function")t=function(){};if(e.clearRect)requestAnimFrame(S);else S();}function calculateScale(e,t,n,r,i,s){var o,u,a,f,l,c,h,p;if(!e.logarithmic){c=r-i;h=calculateOrderOfMagnitude(c);o=Math.floor(i/(1*Math.pow(10,h)))*Math.pow(10,h);u=Math.ceil(r/(1*Math.pow(10,h)))*Math.pow(10,h);if(typeof e.yAxisMinimumInterval=="number"){o=o-o%e.yAxisMinimumInterval;while(o>i)o=o-e.yAxisMinimumInterval;if(u%e.yAxisMinimumInterval>1e-7&&u%e.yAxisMinimumInterval<e.yAxisMinimumInterval-1e-7){u=roundScale(e,(1+Math.floor(u/e.yAxisMinimumInterval))*e.yAxisMinimumInterval)}while(u<r)u=u+e.yAxisMinimumInterval}}else{var d=calculateOrderOfMagnitude(i);var v=calculateOrderOfMagnitude(r)+1;o=Math.pow(10,d);u=Math.pow(10,v);h=v-d}a=u-o;f=Math.pow(10,h);l=Math.round(a/f);if(!e.logarithmic){var m=false;while(!m&&(l<n||l>t)){if(l<n){if(typeof e.yAxisMinimumInterval=="number"){if(f/2<e.yAxisMinimumInterval)m=true}if(!m){f/=2;l=Math.round(a/f)}}else{f*=2;l=Math.round(a/f)}}if(typeof e.yAxisMinimumInterval=="number"){if(f<e.yAxisMinimumInterval){f=e.yAxisMinimumInterval;l=Math.round(a/f)}if(f%e.yAxisMinimumInterval>1e-7&&f%e.yAxisMinimumInterval<e.yAxisMinimumInterval-1e-7){if(2*f%e.yAxisMinimumInterval<1e-7||2*f%e.yAxisMinimumInterval>e.yAxisMinimumInterval-1e-7){f=2*f;l=Math.round(a/f)}else{f=roundScale(e,(1+Math.floor(f/e.yAxisMinimumInterval))*e.yAxisMinimumInterval);l=Math.round(a/f)}}}}else{l=h}var g=[];populateLabels(e,s,g,l,o,u,f);return{steps:l,stepValue:f,graphMin:o,labels:g,maxValue:r}}function roundScale(e,t){var n=0;var r=""+e.yAxisMinimumInterval;if(r.indexOf(".")>0){n=r.substr(r.indexOf(".")).length}return Math.round(t*Math.pow(10,n))/Math.pow(10,n)}function calculateOrderOfMagnitude(e){return Math.floor(Math.log(e)/Math.LN10)}function populateLabels(e,t,n,r,i,s,o){if(t){if(!e.logarithmic){for(var u=0;u<r+1;u++){n.push(tmpl(t,{value:fmtChartJS(e,1*(i+o*u).toFixed(getDecimalPlaces(o)),e.fmtYLabel)}))}}else{var a=i;for(var u=0;u<r+1;u++){n.push(tmpl(t,{value:fmtChartJS(e,1*a.toFixed(getDecimalPlaces(a)),e.fmtYLabel)}));a*=10;a*=10}}}}function Max(e){return Math.max.apply(Math,e)}function Min(e){return Math.min.apply(Math,e)}function Default(e,t){if(!e){return t}else{return e}}function CapValue(e,t,n){if(isNumber(t)){if(e>t){return t}}if(isNumber(n)){if(e<n){return n}}return e}function getDecimalPlaces(e){var t;if(e%1!=0){return e.toString().split(".")[1].length}else{return 0}}function mergeChartConfig(e,t){var n={};for(var r in e){n[r]=e[r]}for(var r in t){n[r]=t[r]}return n}function tmpl(e,t){var n=!/\W/.test(e)?cache[e]=cache[e]||tmpl(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return t?n(t):n}function dispCrossText(e,t,n,r,i,s,o,u,a,f){var l,c,h,p,d,v;for(l=0;l<t.crossText.length;l++){if(t.crossText[l]!=""&&t.crossTextOverlay[Min([l,t.crossTextOverlay.length-1])]==o&&(f==1&&t.crossTextIter[Min([l,t.crossTextIter.length-1])]=="first"||t.crossTextIter[Min([l,t.crossTextIter.length-1])]==f||t.crossTextIter[Min([l,t.crossTextIter.length-1])]=="all"||a==1&&t.crossTextIter[Min([l,t.crossTextIter.length-1])]=="last")){e.save();e.beginPath();e.font=t.crossTextFontStyle[Min([l,t.crossTextFontStyle.length-1])]+" "+t.crossTextFontSize[Min([l,t.crossTextFontSize.length-1])]+"px "+t.crossTextFontFamily[Min([l,t.crossTextFontFamily.length-1])];e.fillStyle=t.crossTextFontColor[Min([l,t.crossTextFontColor.length-1])];d=t.crossTextAlign[Min([l,t.crossTextAlign.length-1])];v=t.crossTextBaseline[Min([l,t.crossTextBaseline.length-1])];h=1*t.crossTextPosX[Min([l,t.crossTextPosX.length-1])];p=1*t.crossTextPosY[Min([l,t.crossTextPosY.length-1])];switch(1*t.crossTextRelativePosX[Min([l,t.crossTextRelativePosX.length-1])]){case 0:if(d=="default")d="left";break;case 1:h+=i;if(d=="default")d="right";break;case 2:h+=n;if(d=="default")d="center";break;case-2:h+=context.canvas.width/2;if(d=="default")d="center";break;case 3:h+=h+2*n-i;if(d=="default")d="left";break;case 4:h+=context.canvas.width;if(d=="default")d="right";break;default:h+=n;if(d=="default")d="center";break}switch(1*t.crossTextRelativePosY[Min([l,t.crossTextRelativePosY.length-1])]){case 0:if(v=="default")v="top";break;case 3:p+=s;if(v=="default")v="top";break;case 2:p+=r;if(v=="default")v="middle";break;case-2:p+=context.canvas.height/2;if(v=="default")v="middle";break;case 1:p+=p+2*r-s;if(v=="default")v="bottom";break;case 4:p+=context.canvas.height;if(v=="default")v="bottom";break;default:p+=r;if(v=="default")v="middle";break}e.textAlign=d;e.textBaseline=v;e.translate(1*h,1*p);e.rotate(Math.PI*t.crossTextAngle[Min([l,t.crossTextAngle.length-1])]/180);if(t.crossText[l].substring(0,1)=="%"){if(typeof t.crossTextFunction=="function")c=t.crossTextFunction(l,t.crossText[l],e,t,n,r,i,s,o,u,a)}else c=t.crossText[l];e.fillTextMultiLine(c,0,0,e.textBaseline,t.crossTextFontSize[Min([l,t.crossTextFontSize.length-1])]);e.stroke();e.restore()}}}function dispCrossImage(e,t,n,r,i,s,o,u,a,f){var l,c,h,p,d,v;for(l=0;l<t.crossImage.length;l++){if(typeof t.crossImage[l]!="undefined"&&t.crossImageOverlay[Min([l,t.crossImageOverlay.length-1])]==o&&(f==-1&&t.crossImageIter[Min([l,t.crossImageIter.length-1])]=="background"||f==1&&t.crossImageIter[Min([l,t.crossImageIter.length-1])]=="first"||t.crossImageIter[Min([l,t.crossImageIter.length-1])]==f||f!=-1&&t.crossImageIter[Min([l,t.crossImageIter.length-1])]=="all"||a==1&&t.crossImageIter[Min([l,t.crossImageIter.length-1])]=="last")){e.save();e.beginPath();d=t.crossImageAlign[Min([l,t.crossImageAlign.length-1])];v=t.crossImageBaseline[Min([l,t.crossImageBaseline.length-1])];h=1*t.crossImagePosX[Min([l,t.crossImagePosX.length-1])];p=1*t.crossImagePosY[Min([l,t.crossImagePosY.length-1])];switch(1*t.crossImageRelativePosX[Min([l,t.crossImageRelativePosX.length-1])]){case 0:if(d=="default")d="left";break;case 1:h+=i;if(d=="default")d="right";break;case 2:h+=n;if(d=="default")d="center";break;case-2:h+=context.canvas.width/2;if(d=="default")d="center";break;case 3:h+=h+2*n-i;if(d=="default")d="left";break;case 4:h+=context.canvas.width;if(d=="default")d="right";break;default:h+=n;if(d=="default")d="center";break}switch(1*t.crossImageRelativePosY[Min([l,t.crossImageRelativePosY.length-1])]){case 0:if(v=="default")v="top";break;case 3:p+=s;if(v=="default")v="top";break;case 2:p+=r;if(v=="default")v="middle";break;case-2:p+=context.canvas.height/2;if(v=="default")v="middle";break;case 1:p+=p+2*r-s;if(v=="default")v="bottom";break;case 4:p+=context.canvas.height;if(v=="default")v="bottom";break;default:p+=r;if(v=="default")v="middle";break}var m=t.crossImage[l].width;switch(d){case"left":break;case"right":h-=m;break;case"center":h-=m/2;break;default:break}var g=t.crossImage[l].height;switch(v){case"top":break;case"bottom":p-=g;break;case"middle":p-=g/2;break;default:break}e.translate(1*h,1*p);e.rotate(Math.PI*t.crossImageAngle[Min([l,t.crossImageAngle.length-1])]/180);e.drawImage(t.crossImage[l],0,0);e.restore()}}}function setMeasures(e,t,n,r,i,s,o,u,a,f,l){if(t.canvasBackgroundColor!="none")n.canvas.style.background=t.canvasBackgroundColor;var c=0;var h=0;var p=0;var d=0;var v=0;var m=0;var g=0;var y=0;var b=0;var w=0;var E=0;var S=0;var x=0;var T=0;var N=0;var C=0;var k=0;var L=0;var A=0;var O=0;var h=0;var p=0;var M=0;var _=0;var D=1;var P=1;var H=0;var B=1;var j=0;var F=0;var I=0;var q=0;if(t.canvasBorders)c=t.canvasBordersWidth;if(a){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;for(var R=0;R<e.labels.length;R++){var U=n.measureTextMultiLine(fmtChartJS(t,e.labels[R],t.fmtXLabel),t.scaleFontSize);D=U.textWidth>D?U.textWidth:D;P=U.textHeight>P?U.textHeight:P}if(D<t.xScaleLabelsMinimumWidth){D=t.xScaleLabelsMinimumWidth}}if(a){H=1;if(s!=null){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;for(var R=s.length-1;R>=0;R--){if(typeof s[R]=="string"){if(s[R].trim()!=""){var U=n.measureTextMultiLine(fmtChartJS(t,s[R],t.fmtYLabel),t.scaleFontSize);H=U.textWidth>H?U.textWidth:H;B=U.textHeight>B?U.textHeight:B}}}}if(H<t.yScaleLabelsMinimumWidth){H=t.yScaleLabelsMinimumWidth}}j=c+t.spaceLeft;F=c+t.spaceRight;if(a){if(typeof t.yAxisLabel!="undefined"){if(t.yAxisLabel.trim()!=""){h=t.yAxisFontSize+t.yAxisLabelSpaceLeft+t.yAxisLabelSpaceRight;yAxisLabelPosLeft=c+t.spaceLeft+t.yAxisLabelSpaceLeft+t.yAxisFontSize;yAxisLabelPosRight=i-c-t.spaceRight-t.yAxisLabelSpaceLeft-t.yAxisFontSize}}if(t.yAxisLeft){if(u==false)j=c+t.spaceLeft+h+H+t.yAxisSpaceLeft+t.yAxisSpaceRight;else j=c+t.spaceLeft+h+D+t.yAxisSpaceLeft+t.yAxisSpaceRight}if(t.yAxisRight){if(u==false)F=c+t.spaceRight+h+H+t.yAxisSpaceLeft+t.yAxisSpaceRight;else F=c+t.spaceRight+h+D+t.yAxisSpaceLeft+t.yAxisSpaceRight}}availableWidth=i-j-F;if(t.graphTitle.trim()!=""){d=t.graphTitleFontSize+t.graphTitleSpaceBefore+t.graphTitleSpaceAfter;v=c+t.spaceTop+d-t.graphTitleSpaceAfter}if(t.graphSubTitle.trim()!=""){m=t.graphSubTitleFontSize+t.graphSubTitleSpaceBefore+t.graphSubTitleSpaceAfter;g=c+t.spaceTop+d+m-t.graphSubTitleSpaceAfter}if(a){if(typeof t.yAxisUnit!="undefined"){if(t.yAxisUnit.trim()!=""){w=t.yAxisUnitFontSize+t.yAxisUnitSpaceBefore+t.yAxisUnitSpaceAfter;E=c+t.spaceTop+d+m+w-t.yAxisUnitSpaceAfter}}}topNotUsableSize=c+t.spaceTop+d+m+w+t.graphSpaceBefore;if(typeof t.footNote!="undefined"){if(t.footNote.trim()!=""){y=t.footNoteFontSize+t.footNoteSpaceBefore+t.footNoteSpaceAfter;b=r-t.spaceBottom-c-t.footNoteSpaceAfter}}if(typeof t.legend!="undefined"){if(t.legend==true){n.font=t.legendFontStyle+" "+t.legendFontSize+"px "+t.legendFontFamily;if(f){for(var R=e.datasets.length-1;R>=0;R--){if(typeof e.datasets[R].title=="string"){if(e.datasets[R].title.trim()!=""){x++;var z=n.measureText(fmtChartJS(t,e.datasets[R].title,t.fmtLegend)).width;S=z>S?z:S}}}}else{for(var R=e.length-1;R>=0;R--){if(typeof e[R].title=="string"){if(e[R].title.trim()!=""){x++;var z=n.measureText(fmtChartJS(t,e[R].title,t.fmtLegend)).width;S=z>S?z:S}}}}if(x>1||x==1&&t.showSingleLegend){S+=t.legendBlockSize+t.legendSpaceBetweenBoxAndText;availableLegendWidth=i-t.spaceLeft-t.spaceRight-2*c-t.legendSpaceLeftText-t.legendSpaceRightText;if(t.legendBorders==true)availableLegendWidth-=2*t.legendBordersWidth-t.legendBordersSpaceLeft-t.legendBordersSpaceRight;maxLegendOnLine=Math.floor((availableLegendWidth+t.legendSpaceBetweenTextHorizontal)/(S+t.legendSpaceBetweenTextHorizontal));T=Math.ceil(x/maxLegendOnLine);N=Math.ceil(x/T);C=T*(t.legendFontSize+t.legendSpaceBetweenTextVertical)-t.legendSpaceBetweenTextVertical+t.legendSpaceBeforeText+t.legendSpaceAfterText;L=r-c-t.spaceBottom-y-C+t.legendSpaceBeforeText+t.legendFontSize;k=t.spaceLeft+(i-t.spaceLeft-t.spaceRight-N*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal)/2;if(t.legendBorders==true){C+=2*t.legendBordersWidth+t.legendBordersSpaceBefore+t.legendBordersSpaceAfter;L-=t.legendBordersWidth+t.legendBordersSpaceAfter;O=Math.floor(r-c-t.spaceBottom-y-C+t.legendBordersWidth/2+t.legendBordersSpaceBefore);A=Math.floor(k-t.legendSpaceLeftText-t.legendBordersWidth/2);legendBorderHeight=Math.ceil(C-t.legendBordersWidth)-t.legendBordersSpaceBefore-t.legendBordersSpaceAfter;legendBorderWidth=Math.ceil(N*(S+t.legendSpaceBetweenTextHorizontal))-t.legendSpaceBetweenTextHorizontal+t.legendBordersWidth+t.legendSpaceRightText+t.legendSpaceLeftText}}}}if(a){if(typeof t.xAxisLabel!="undefined"){if(t.xAxisLabel.trim()!=""){M=t.xAxisFontSize+t.xAxisLabelSpaceBefore+t.xAxisLabelSpaceAfter;xAxisLabelPos=r-c-t.spaceBottom-y-C-t.xAxisLabelSpaceAfter}}}xLabelWidth=0;if(a&&(t.xAxisBottom||t.xAxisTop)){if(u==false){var W=D;var X=P;nblab=e.labels.length}else{var W=H;var X=B;nblab=s.length}if(t.rotateLabels=="smart"){I=0;if((availableWidth+t.xAxisSpaceBetweenLabels)/nblab<W+t.xAxisSpaceBetweenLabels){I=45;if(availableWidth/nblab<Math.abs(Math.cos(I*Math.PI/180)*W)){I=90}}}else{I=t.rotateLabels;if(I<0)I=0;if(I>180)I=180}if(I>90)I+=180;_=Math.abs(Math.sin(I*Math.PI/180)*W)+Math.abs(Math.sin((I+90)*Math.PI/180)*X)+t.xAxisSpaceBefore+t.xAxisSpaceAfter;q=r-c-t.spaceBottom-y-C-M-(_-t.xAxisSpaceBefore)-t.graphSpaceAfter;xLabelWidth=Math.abs(Math.cos(I*Math.PI/180)*W)+Math.abs(Math.cos((I+90)*Math.PI/180)*X);j=Max([j,c+t.spaceLeft+xLabelWidth/2]);F=Max([F,c+t.spaceRight+xLabelWidth/2]);availableWidth=i-j-F}if(t.xAxisBottom){bottomNotUsableHeightWithoutXLabels=c+t.spaceBottom+y+C+M;bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels+_+t.graphSpaceAfter;availableHeight=r-topNotUsableSize-bottomNotUsableHeightWithXLabels}else{bottomNotUsableHeightWithoutXLabels=c+t.spaceBottom+y+C+M;bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels+t.graphSpaceAfter;availableHeight=r-topNotUsableSize-bottomNotUsableHeightWithXLabels}dispCrossImage(n,t,i/2,r/2,i/2,r/2,false,e,-1,-1);if(H!=1){if(c>0){n.save();n.beginPath();n.lineWidth=2*c;n.strokeStyle=t.canvasBordersColor;n.moveTo(0,0);n.lineTo(0,r);n.lineTo(i,r);n.lineTo(i,0);n.lineTo(0,0);n.stroke();n.restore()}if(d>0){n.save();n.beginPath();n.font=t.graphTitleFontStyle+" "+t.graphTitleFontSize+"px "+t.graphTitleFontFamily;n.fillStyle=t.graphTitleFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(t.spaceLeft+(i-t.spaceLeft-t.spaceRight)/2,v);n.fillText(t.graphTitle,0,0);n.stroke();n.restore()}if(m>0){n.save();n.beginPath();n.font=t.graphSubTitleFontStyle+" "+t.graphSubTitleFontSize+"px "+t.graphSubTitleFontFamily;n.fillStyle=t.graphSubTitleFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(t.spaceLeft+(i-t.spaceLeft-t.spaceRight)/2,g);n.fillText(t.graphSubTitle,0,0);n.stroke();n.restore()}if(w>0){if(t.yAxisLeft){n.save();n.beginPath();n.font=t.yAxisUnitFontStyle+" "+t.yAxisUnitFontSize+"px "+t.yAxisUnitFontFamily;n.fillStyle=t.yAxisUnitFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(j,E);n.fillText(t.yAxisUnit,0,0);n.stroke();n.restore()}if(t.yAxisRight){n.save();n.beginPath();n.font=t.yAxisUnitFontStyle+" "+t.yAxisUnitFontSize+"px "+t.yAxisUnitFontFamily;n.fillStyle=t.yAxisUnitFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(i-F,E);n.fillText(t.yAxisUnit,0,0);n.stroke();n.restore()}}if(h>0){if(t.yAxisLeft){n.save();n.beginPath();n.font=t.yAxisFontStyle+" "+t.yAxisFontSize+"px "+t.yAxisFontFamily;n.fillStyle=t.yAxisFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(yAxisLabelPosLeft,topNotUsableSize+availableHeight/2);n.rotate(-(90*(Math.PI/180)));n.fillText(t.yAxisLabel,0,0);n.stroke();n.restore()}if(t.yAxisRight){n.save();n.beginPath();n.font=t.yAxisFontStyle+" "+t.yAxisFontSize+"px "+t.yAxisFontFamily;n.fillStyle=t.yAxisFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(yAxisLabelPosRight,topNotUsableSize+availableHeight/2);n.rotate(+(90*(Math.PI/180)));n.fillText(t.yAxisLabel,0,0);n.stroke();n.restore()}}if(M>0){if(t.xAxisBottom){n.save();n.beginPath();n.font=t.xAxisFontStyle+" "+t.xAxisFontSize+"px "+t.xAxisFontFamily;n.fillStyle=t.xAxisFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(j+availableWidth/2,xAxisLabelPos);n.fillText(t.xAxisLabel,0,0);n.stroke();n.restore()}}if(x>1||x==1&&t.showSingleLegend){if(t.legendBorders==true){n.save();n.beginPath();n.lineWidth=t.legendBordersWidth;n.strokeStyle=t.legendBordersColors;n.moveTo(A,O);n.lineTo(A,O+legendBorderHeight);n.lineTo(A+legendBorderWidth,O+legendBorderHeight);n.lineTo(A+legendBorderWidth,O);n.lineTo(A,O);n.lineTo(A+legendBorderWidth,O);n.lineTo(A,O);n.lineTo(A,O+legendBorderHeight);n.stroke();n.restore()}nbcols=N-1;ypos=L-(t.legendFontSize+t.legendSpaceBetweenTextVertical);xpos=0;if(f)fromi=e.datasets.length;else fromi=e.length;for(var R=fromi-1;R>=0;R--){orderi=R;if(o){if(f)orderi=e.datasets.length-R-1;else orderi=e.length-R-1}if(f)tpof=typeof e.datasets[orderi].title;else tpof=typeof e[orderi].title;if(tpof=="string"){if(f)lgtxt=fmtChartJS(t,e.datasets[orderi].title,t.fmtLegend).trim();else lgtxt=fmtChartJS(t,e[orderi].title,t.fmtLegend).trim();if(lgtxt!=""){nbcols++;if(nbcols==N){nbcols=0;xpos=k;ypos+=t.legendFontSize+t.legendSpaceBetweenTextVertical}else{xpos+=S+t.legendSpaceBetweenTextHorizontal}n.save();n.beginPath();if(f){if(typeof e.datasets[orderi].strokeColor=="function")n.strokeStyle=e.datasets[orderi].strokeColor("STROKECOLOR",e,t,orderi,-1,1,-1);else if(typeof e.datasets[orderi].strokeColor=="string")n.strokeStyle=e.datasets[orderi].strokeColor;else n.strokeStyle=t.defaultStrokeColor}else{if(typeof e[orderi].color=="function")n.fillStyle=e[orderi].color("COLOR",e,t,orderi,-1,1,e[orderi].value);else if(typeof e[orderi].color=="string")n.strokeStyle=e[orderi].color;else n.strokeStyle=t.defaultStrokeColor}if(l){n.lineWidth=1;n.moveTo(xpos,ypos);n.lineTo(xpos+t.legendBlockSize,ypos);n.lineTo(xpos+t.legendBlockSize,ypos-t.legendFontSize);n.lineTo(xpos,ypos-t.legendFontSize);n.lineTo(xpos,ypos);n.closePath();if(f){if(typeof e.datasets[R].fillColor=="function")n.fillStyle=e.datasets[R].fillColor("FILLCOLOR",e,t,R,-1,1,-1);else if(typeof e.datasets[orderi].fillColor=="string")n.fillStyle=e.datasets[orderi].fillColor;else n.fillStyle=t.defaultFillColor}else{if(typeof e[orderi].color=="string")n.fillStyle=e[orderi].color;else n.fillStyle=t.defaultFillColor}n.fill()}else{n.lineWidth=t.legendColorIndicatorStrokeWidth?t.legendColorIndicatorStrokeWidth:t.datasetStrokeWidth;if(t.legendColorIndicatorStrokeWidth&&t.legendColorIndicatorStrokeWidth>t.legendFontSize){n.lineWidth=t.legendFontSize}n.moveTo(xpos+2,ypos-t.legendFontSize/2);n.lineTo(xpos+2+t.legendBlockSize,ypos-t.legendFontSize/2)}n.stroke();n.restore();n.save();n.beginPath();n.font=t.legendFontStyle+" "+t.legendFontSize+"px "+t.legendFontFamily;n.fillStyle=t.legendFontColor;n.textAlign="left";n.textBaseline="bottom";n.translate(xpos+t.legendBlockSize+t.legendSpaceBetweenBoxAndText,ypos);n.fillText(lgtxt,0,0);n.stroke();n.restore()}}}}if(t.footNote.trim()!=""){n.save();n.font=t.footNoteFontStyle+" "+t.footNoteFontSize+"px "+t.footNoteFontFamily;n.fillStyle=t.footNoteFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(j+availableWidth/2,b);n.fillText(t.footNote,0,0);n.stroke();n.restore()}}clrx=j;clrwidth=availableWidth;clry=topNotUsableSize;clrheight=availableHeight;return{leftNotUsableSize:j,rightNotUsableSize:F,availableWidth:availableWidth,topNotUsableSize:topNotUsableSize,bottomNotUsableHeightWithoutXLabels:bottomNotUsableHeightWithoutXLabels,bottomNotUsableHeightWithXLabels:bottomNotUsableHeightWithXLabels,availableHeight:availableHeight,widestXLabel:D,highestXLabel:P,widestYLabel:H,highestYLabel:B,rotateLabels:I,xLabelPos:q,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight}}function drawLinesDataset(e,n,r,i,s,o){function O(e,t){return u-h-w.mainVal*(calculateOffset(r,n.datasets[e].data[t],p,c)-h)}function M(e,t,n){if(typeof n.datasets[e].xPos=="object"){if(!(typeof n.datasets[e].xPos[Math.floor(t+1e-4)]=="undefined")){var r=f*l;var i=typeof n.xBegin!="undefined"?n.xBegin:1*n.labels[0];var s=typeof n.xEnd!="undefined"?n.xEnd:1*n.labels[n.labels.length-1];if(s<=i)s=i+100;if(1*n.datasets[e].xPos[Math.floor(t+1e-4)]>=i&&n.datasets[e].xPos[Math.floor(t+1e-4)]<=s){var o=a+r*((1*n.datasets[e].xPos[Math.floor(t+1e-4)]-i)/(s-i));var u=o;if(Math.abs(t-Math.floor(t+1e-4))>1e-4){var c=t+Math.floor(t+1e-4);var u=M(e,Math.ceil(t-1e-4),n)}return o+(t-Math.floor(t+1e-4))*(u-o)}}}return a+f*t}var u=o.xAxisPosY;var a=o.yAxisPosX;var f=o.valueHop;var l=o.nbValueHop;var c=o.scaleHop;var h=o.zeroY;var p=o.calculatedScale;var d=new Array;var v=new Array;for(var m=0;m<n.datasets.length;m++){for(var g=0;g<n.datasets[m].data.length;g++){d[g]=0;v[g]=-999999999}}for(var m=0;m<n.datasets.length;m++){for(var g=0;g<n.datasets[m].data.length;g++){d[g]+=n.datasets[m].data[g];v[g]=Max([v[g],n.datasets[m].data[g]])}}for(var m=0;m<n.datasets.length;m++){var y=-1;var b=-1;if(typeof n.datasets[m].strokeColor=="function"){i.strokeStyle=n.datasets[m].strokeColor("STROKECOLOR",n,r,m,-1,e,-1)}else if(typeof n.datasets[m].strokeColor=="string"){i.strokeStyle=n.datasets[m].strokeColor}else i.strokeStyle=r.defaultStrokeColor;i.lineWidth=r.datasetStrokeWidth;i.beginPath();var w;var E;var S;E=0;prevnotempty=0;for(var g=0;g<n.datasets[m].data.length;g++){var x=M(m,g,n);var w=animationCorrection(e,n,r,m,g,0);if(w.mainVal==0&&E>0){i.stroke();i.strokeStyle="rgba(0,0,0,0)";i.lineTo(S,u-h)}E=w.mainVal;if(w.mainVal>=1){if(typeof n.datasets[m].title=="string")lgtxt=n.datasets[m].title.trim();else lgtxt=""}if(!(typeof n.datasets[m].data[g]=="undefined")){S=M(m,g,n);if(y==-1){i.moveTo(x,O(m,g));b=g}else{if(r.bezierCurve){i.bezierCurveTo(M(m,g-(g-y)/2,n),O(m,y),M(m,g-(g-y)/2,n),O(m,g),M(m,g,n),O(m,g))}else{i.lineTo(M(m,g,n),O(m,g))}}if(typeof n.datasets[m].data[g+1]!=="undefined"||true==r.extrapolateMissingData){if(w.subVal>0){nxtnotmiss=-1;for(t=g+1;t<n.datasets[m].data["length"]&&nxtnotmiss==-1;t++){if(!(typeof n.datasets[m].data[t]=="undefined"))nxtnotmiss=t}if(nxtnotmiss!=-1){S=M(m,g+w.subVal,n);if(r.bezierCurve){i.bezierCurveTo(M(m,g+w.subVal/2,n),O(m,g),M(m,g+w.subVal/2,n),O(m,nxtnotmiss),M(m,g+w.subVal,n),O(m,nxtnotmiss))}else{i.lineTo(M(m,g+w.subVal,n),O(m,g+1))}}}y=g;if(e>=1){if(m==0)divprev=n.datasets[m].data[g];else divprev=n.datasets[m].data[g]-n.datasets[m-1].data[g];if(m==n.datasets.length-1)divnext=n.datasets[m].data[g];else divnext=n.datasets[m].data[g]-n.datasets[m+1].data[g];lgtxt2="";if(typeof n.datasets[m].xPos!="undefined"){if(!(typeof n.datasets[m].xPos[g]=="undefined"))lgtxt2=n.datasets[m].xPos[g]}if(lgtxt2==""&&!(typeof n.labels[g]=="undefined"))lgtxt2=n.labels[g];if(typeof lgtxt2=="string")lgtxt2=lgtxt2.trim();jsGraphAnnotate[i.ChartNewId][jsGraphAnnotate[i.ChartNewId].length]=["POINT",M(m,g,n),O(m,g),lgtxt,lgtxt2,1*n.datasets[m].data[g],divprev,divnext,v[g],d[g],m,g];if(r.inGraphDataShow){i.save();i.textAlign=r.inGraphDataAlign;i.textBaseline=r.inGraphDataVAlign;i.font=r.inGraphDataFontStyle+" "+r.inGraphDataFontSize+"px "+r.inGraphDataFontFamily;i.fillStyle=r.inGraphDataFontColor;var T=a+f*A,N=u-w.mainVal*calculateOffset(r,n.datasets[m].data[g],p,c),C=r.inGraphDataPaddingX,k=r.inGraphDataPaddingY;var L=tmplbis(r.inGraphDataTmpl,{config:r,v1:fmtChartJS(r,lgtxt,r.fmtV1),v2:fmtChartJS(r,lgtxt2,r.fmtV2),v3:fmtChartJS(r,1*n.datasets[m].data[g],r.fmtV3),v4:fmtChartJS(r,divprev,r.fmtV4),v5:fmtChartJS(r,divnext,r.fmtV5),v6:fmtChartJS(r,v[g],r.fmtV6),v7:fmtChartJS(r,d[g],r.fmtV7),v8:roundToWithThousands(r,fmtChartJS(r,100*n.datasets[m].data[g]/d[g],r.fmtV8),r.roundPct),v9:fmtChartJS(r,a+f*A,r.fmtV9),v10:fmtChartJS(r,u-calculateOffset(r,n.datasets[m].data[g],p,c),r.fmtV10),v11:fmtChartJS(r,m,r.fmtV11),v12:fmtChartJS(r,g,r.fmtV12),data:n});i.translate(M(m,g,n)+C,O(m,g)-k);i.rotate(r.inGraphDataRotate*(Math.PI/180));i.fillTextMultiLine(L,0,0,i.textBaseline,r.inGraphDataFontSize);i.restore()}}}}else{if(false==r.extrapolateMissingData){i.stroke();if(r.datasetFill){i.lineTo(S,u-h);i.lineTo(M(m,b,n),u-h);i.lineTo(M(m,b,n),O(m,b));i.closePath();if(typeof n.datasets[m].fillColor=="function")i.fillStyle=n.datasets[m].fillColor("FILLCOLOR",n,r,m,-1,w.mainVal,-1);else if(typeof n.datasets[m].fillColor=="string")i.fillStyle=n.datasets[m].fillColor;else i.fillStyle=r.defaultFillColor;i.fill()}i.beginPath();y=-1;b=-1;E=0;prevnotempty=0}else{if(w.subVal>0){nxtnotmiss=-1;for(t=g+1;t<n.datasets[m].data["length"]&&nxtnotmiss==-1;t++){if(!(typeof n.datasets[m].data[t]=="undefined"))nxtnotmiss=t}if(typeof n.datasets[m].data[g]!=="undefined"||true==r.extrapolateMissingData){if(nxtnotmiss!=-1){S=M(m,g+w.subVal,n);if(r.bezierCurve){i.bezierCurveTo(M(m,y+(g+w.subVal-y)/2,n),O(m,y),M(m,y+(g+w.subVal-y)/2,n),O(m,nxtnotmiss),M(m,g+w.subVal,n),O(m,nxtnotmiss))}else{i.lineTo(M(m,g+w.subVal,n),O(m,g+1))}}}}}}}i.stroke();if(r.datasetFill){i.lineTo(S,u-h);i.lineTo(M(m,b,n),u-h);i.lineTo(M(m,b,n),O(m,b));i.closePath();if(typeof n.datasets[m].fillColor=="function")i.fillStyle=n.datasets[m].fillColor("FILLCOLOR",n,r,m,-1,w.mainVal,-1);else if(typeof n.datasets[m].fillColor=="string")i.fillStyle=n.datasets[m].fillColor;else i.fillStyle=r.defaultFillColor;i.fill()}else{i.closePath()}if(r.pointDot){if(typeof n.datasets[m].pointColor=="function")i.fillStyle=n.datasets[m].pointColor("POINTCOLOR",n,r,m,-1,e,-1);else i.fillStyle=n.datasets[m].pointColor;if(typeof n.datasets[m].pointStrokeColor=="function")i.strokeStyle=n.datasets[m].pointStrokeColor("POINTSTROKECOLOR",n,r,m,-1,e,-1);else i.strokeStyle=n.datasets[m].pointStrokeColor;i.lineWidth=r.pointDotStrokeWidth;for(var A=0;A<n.datasets[m].data.length;A++){if(!(typeof n.datasets[m].data[A]=="undefined")){var w=animationCorrection(e,n,r,m,A,0);if(w.mainVal>0||!r.animationLeftToRight){i.beginPath();i.arc(M(m,A,n),O(m,A),r.pointDotRadius,0,Math.PI*2,true);i.fill();i.stroke()}}}}}}function log10(e){return Math.log(e)/Math.LN10}function setRect(e,t){if(t.clearRect){if(!t.multiGraph){clear(e);e.clearRect(0,0,width,height)}}else{clear(e);e.clearRect(0,0,width,height);e.fillStyle=t.savePngBackgroundColor;e.strokeStyle=t.savePngBackgroundColor;e.beginPath();e.moveTo(0,0);e.lineTo(0,e.canvas.height);e.lineTo(e.canvas.width,e.canvas.height);e.lineTo(e.canvas.width,0);e.lineTo(0,0);e.stroke();e.fill()}}function defMouse(e,t,n,r){if(n.annotateDisplay==true){if(cursorDivCreated==false)oCursor=new makeCursorObj("divCursor");if(isIE()<9&&isIE()!=false)e.canvas.attachEvent("on"+n.annotateFunction.split(" ")[0],function(r){if(n.annotateFunction.split(" ")[1]=="left"&&r.which==1||n.annotateFunction.split(" ")[1]=="middle"&&r.which==2||n.annotateFunction.split(" ")[1]=="right"&&r.which==3||typeof n.annotateFunction.split(" ")[1]!="string")doMouseMove(e,n,r,t)});else e.canvas.addEventListener(n.annotateFunction.split(" ")[0],function(r){if(n.annotateFunction.split(" ")[1]=="left"&&r.which==1||n.annotateFunction.split(" ")[1]=="middle"&&r.which==2||n.annotateFunction.split(" ")[1]=="right"&&r.which==3||typeof n.annotateFunction.split(" ")[1]!="string")doMouseMove(e,n,r,t)},false)}if(n.savePng){if(isIE()<9&&isIE()!=false)e.canvas.attachEvent("on"+n.savePngFunction.split(" ")[0],function(i){if(n.savePngFunction.split(" ")[1]=="left"&&i.which==1||n.savePngFunction.split(" ")[1]=="middle"&&i.which==2||n.savePngFunction.split(" ")[1]=="right"&&i.which==3||typeof n.savePngFunction.split(" ")[1]!="string")saveCanvas(e,t,n,r)});else e.canvas.addEventListener(n.savePngFunction.split(" ")[0],function(i){if(n.savePngFunction.split(" ")[1]=="left"&&i.which==1||n.savePngFunction.split(" ")[1]=="middle"&&i.which==2||n.savePngFunction.split(" ")[1]=="right"&&i.which==3||typeof n.savePngFunction.split(" ")[1]!="string")saveCanvas(e,t,n,r)},false)}}var chart=this;var animationOptions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){if((e/=1/2)<1)return 1/2*e*e;return-1/2*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){if((e/=1/2)<1)return 1/2*e*e*e;return 1/2*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){if((e/=1/2)<1)return 1/2*e*e*e*e;return-1/2*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){if((e/=1/2)<1)return 1/2*e*e*e*e*e;return 1/2*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-1/2*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return e==0?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return e==1?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){if(e==0)return 0;if(e==1)return 1;if((e/=1/2)<1)return 1/2*Math.pow(2,10*(e-1));return 1/2*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){if(e>=1)return e;return-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){if((e/=1/2)<1)return-1/2*(Math.sqrt(1-e*e)-1);return 1/2*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158;var n=0;var r=1;if(e==0)return 0;if((e/=1)==1)return 1;if(!n)n=1*.3;if(r<Math.abs(1)){r=1;var t=n/4}else var t=n/(2*Math.PI)*Math.asin(1/r);return-(r*Math.pow(2,10*(e-=1))*Math.sin((e*1-t)*2*Math.PI/n))},easeOutElastic:function(e){var t=1.70158;var n=0;var r=1;if(e==0)return 0;if((e/=1)==1)return 1;if(!n)n=1*.3;if(r<Math.abs(1)){r=1;var t=n/4}else var t=n/(2*Math.PI)*Math.asin(1/r);return r*Math.pow(2,-10*e)*Math.sin((e*1-t)*2*Math.PI/n)+1},easeInOutElastic:function(e){var t=1.70158;var n=0;var r=1;if(e==0)return 0;if((e/=1/2)==2)return 1;if(!n)n=1*.3*1.5;if(r<Math.abs(1)){r=1;var t=n/4}else var t=n/(2*Math.PI)*Math.asin(1/r);if(e<1)return-.5*r*Math.pow(2,10*(e-=1))*Math.sin((e*1-t)*2*Math.PI/n);return r*Math.pow(2,-10*(e-=1))*Math.sin((e*1-t)*2*Math.PI/n)*.5+1},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;if((e/=1/2)<1)return 1/2*e*e*(((t*=1.525)+1)*e-t);return 1/2*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-animationOptions.easeOutBounce(1-e)},easeOutBounce:function(e){if((e/=1)<1/2.75){return 1*7.5625*e*e}else if(e<2/2.75){return 1*(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 1*(7.5625*(e-=2.25/2.75)*e+.9375)}else{return 1*(7.5625*(e-=2.625/2.75)*e+.984375)}},easeInOutBounce:function(e){if(e<1/2)return animationOptions.easeInBounce(e*2)*.5;return animationOptions.easeOutBounce(e*2-1)*.5+1*.5}};var width=context.canvas.width;var height=context.canvas.height;if(window.devicePixelRatio){context.canvas.style.width=width+"px";context.canvas.style.height=height+"px";context.canvas.height=height*window.devicePixelRatio;context.canvas.width=width*window.devicePixelRatio;context.scale(window.devicePixelRatio,window.devicePixelRatio)}this.PolarArea=function(e,t){chart.PolarArea.defaults={inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:true,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90};chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults);chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions);chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var n=t?mergeChartConfig(chart.PolarArea.defaults,t):chart.PolarArea.defaults;return new PolarArea(e,n,context)};this.Radar=function(e,t){chart.Radar.defaults={inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:false,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:true,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:true,pointDotRadius:3,pointDotStrokeWidth:1,datasetFill:true,datasetStrokeWidth:2,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",startAngle:90,graphMaximized:false};chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults);chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions);chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var n=t?mergeChartConfig(chart.Radar.defaults,t):chart.Radar.defaults;return new Radar(e,n,context)};this.Pie=function(e,t){chart.Pie.defaults={inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,radiusScale:1};chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults);chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions);chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);var n=t?mergeChartConfig(chart.Pie.defaults,t):chart.Pie.defaults;return new Pie(e,n,context)};this.Doughnut=function(e,t){chart.Doughnut.defaults={inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,radiusScale:1};chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults);chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions);chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var n=t?mergeChartConfig(chart.Doughnut.defaults,t):chart.Doughnut.defaults;return new Doughnut(e,n,context)};this.Line=function(e,t){chart.Line.defaults={inGraphDataShow:false,inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",drawXScaleLine:[{position:"bottom"}],scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:true,rotateLabels:"smart",logarithmic:false,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:true,pointDot:true,pointDotRadius:4,pointDotStrokeWidth:2,datasetStrokeWidth:2,datasetFill:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:true,onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>"};chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults);chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults);chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions);chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var n=t?mergeChartConfig(chart.Line.defaults,t):chart.Line.defaults;return new Line(e,n,context)};this.StackedBar=function(e,t){chart.StackedBar.defaults={inGraphDataShow:false,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:true,rotateLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"};chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults);chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults);chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions);chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var n=t?mergeChartConfig(chart.StackedBar.defaults,t):chart.StackedBar.defaults;return new StackedBar(e,n,context)};this.HorizontalStackedBar=function(e,t){chart.HorizontalStackedBar.defaults={inGraphDataShow:false,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:true,rotateLabels:"smart",barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:false};chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults);chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults);chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions);chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);var n=t?mergeChartConfig(chart.HorizontalStackedBar.defaults,t):chart.HorizontalStackedBar.defaults;return new HorizontalStackedBar(e,n,context)};this.Bar=function(e,t){chart.Bar.defaults={inGraphDataShow:false,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:true,rotateLabels:"smart",logarithmic:false,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"};chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults);chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults);chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions);chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var n=t?mergeChartConfig(chart.Bar.defaults,t):chart.Bar.defaults;return new Bar(e,n,context)};this.HorizontalBar=function(e,t){chart.HorizontalBar.defaults={inGraphDataShow:false,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:true,rotateLabels:"smart",barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:false};chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults);chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults);chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions);chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var n=t?mergeChartConfig(chart.HorizontalBar.defaults,t):chart.HorizontalBar.defaults;return new HorizontalBar(e,n,context)};chart.defaults={};chart.defaults.commonOptions={multiGraph:false,clearRect:true,dynamicDisplay:false,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:false,canvasBackgroundColor:"none",canvasBordersWidth:3,canvasBordersColor:"black",graphTitle:"",graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphSubTitle:"",graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,footNote:"",footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,legend:false,showSingleLegend:false,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBorders:true,legendBordersWidth:1,legendBordersColors:"#666",legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,annotateDisplay:false,savePng:false,savePngOuput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",crossText:[""],crossTextIter:["all"],crossTextOverlay:[true],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossImage:[undefined],crossImageIter:["all"],crossImageOverlay:[true],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",roundNumber:"none",roundPct:-1,fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV7:"none",fmtV8:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtXLabel:"none",fmtYLabel:"none",fmtLegend:"none",animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:false,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:false,animationByDataset:false,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)"};chart.defaults.xyAxisCommonOptions={yAxisMinimumInterval:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:true,yAxisRight:false,xAxisBottom:true,xAxisTop:false,xAxisSpaceBetweenLabels:5,fullWidthGraph:false,yAxisLabel:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,xAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,yAxisUnit:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5};var clear=function(e){e.clearRect(0,0,width,height)};var PolarArea=function(e,t,n){function m(r){var o=-t.startAngle*(Math.PI/180)+2*Math.PI,u=0,a=0,f=1,l=1;a=0;for(var p=0;p<e.length;p++)if(!(typeof e[p].value=="undefined"))a++;a=Math.PI*2/a;while(o<0){o+=2*Math.PI}while(o>2*Math.PI){o-=2*Math.PI}if(t.animation){if(t.animateScale){f=r}if(t.animateRotate){l=r}}if(r>=1){totvalue=0;for(var p=0;p<e.length;p++)if(!(typeof e[p].value=="undefined"))totvalue+=1*e[p].value}for(var p=0;p<e.length;p++){correctedRotateAnimation=animationCorrection(l,e,t,p,-1,0).mainVal;if(!(typeof e[p].value=="undefined")){n.beginPath();n.arc(c,h,f*calculateOffset(t,1*e[p].value,s,i),o,o+correctedRotateAnimation*a,false);n.lineTo(c,h);n.closePath();if(typeof e[p].color=="function")n.fillStyle=e[p].color("COLOR",e,t,p,-1,r,e[p].value);else n.fillStyle=e[p].color;n.fill();o+=a;if(t.segmentShowStroke){n.strokeStyle=t.segmentStrokeColor;n.lineWidth=t.segmentStrokeWidth;n.stroke()}}}if(r>=1){o=-t.startAngle*(Math.PI/180)+2*Math.PI;for(var p=0;p<e.length;p++){if(!(typeof e[p].value=="undefined")){u+=1*e[p].value;o+=a;if(typeof e[p].title=="string")lgtxt=e[p].title.trim();else lgtxt="";jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["ARC",c,h,0,calculateOffset(t,1*e[p].value,s,i),o-a,o,lgtxt,1*e[p].value,u,totvalue,a,p];if(t.inGraphDataShow){if(t.inGraphDataAnglePosition==1)posAngle=v+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)posAngle=v-a/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)posAngle=v-a+t.inGraphDataPaddingAngle*(Math.PI/180);if(t.inGraphDataRadiusPosition==1)labelRadius=0+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==2)labelRadius=calculateOffset(t,1*e[p].value,s,i)/2+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==3)labelRadius=calculateOffset(t,1*e[p].value,s,i)+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==4)labelRadius=i*s.steps+t.inGraphDataPaddingRadius;n.save();if(t.inGraphDataAlign=="off-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="left";else n.textAlign="right"}else if(t.inGraphDataAlign=="to-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="right";else n.textAlign="left"}else n.textAlign=t.inGraphDataAlign;if(t.inGraphDataVAlign=="off-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="top";else n.textBaseline="bottom"}else if(t.inGraphDataVAlign=="to-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="bottom";else n.textBaseline="top"}else n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var d=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[p].value,t.fmtV2),v3:fmtChartJS(t,u,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,a,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[p].value/totvalue,t.fmtV6),t.roundPct),v7:fmtChartJS(t,c,t.fmtV7),v8:fmtChartJS(t,h,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,calculateOffset(t,1*e[p].value,s,i),t.fmtV10),v11:fmtChartJS(t,o-a,t.fmtV11),v12:fmtChartJS(t,a,t.fmtV12),v13:fmtChartJS(t,p,t.fmtV13),data:e});n.translate(c+labelRadius*Math.cos(posAngle),h-labelRadius*Math.sin(posAngle));if(t.inGraphDataRotate=="inRadiusAxis")n.rotate(2*Math.PI-posAngle);else if(t.inGraphDataRotate=="inRadiusAxisRotateLabels"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)n.rotate(3*Math.PI-posAngle);else n.rotate(2*Math.PI-posAngle)}else n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillTextMultiLine(d,0,0,n.textBaseline,t.inGraphDataFontSize);n.restore();v-=a}}}}}function g(){for(var e=0;e<s.steps;e++){if(t.scaleShowLine){n.beginPath();n.arc(c,h,i*(e+1),0,Math.PI*2,true);n.strokeStyle=t.scaleLineColor;n.lineWidth=t.scaleLineWidth;n.stroke()}if(t.scaleShowLabels){n.textAlign="center";n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;var r=s.labels[e+1];if(t.scaleShowLabelBackdrop){var o=n.measureTextMultiLine(r,t.scaleFontSize).textWidth;n.fillStyle=t.scaleBackdropColor;n.beginPath();n.rect(Math.round(c-o/2-t.scaleBackdropPaddingX),Math.round(h-i*(e+1)-t.scaleFontSize*.5-t.scaleBackdropPaddingY),Math.round(o+t.scaleBackdropPaddingX*2),Math.round(t.scaleFontSize+t.scaleBackdropPaddingY*2));n.fill()}n.textBaseline="middle";n.fillStyle=t.scaleFontColor;n.fillTextMultiLine(r,c,h-i*(e+1),n.textBaseline,t.scaleFontSize)}}}function y(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;for(var i=0;i<e.length;i++){if(1*e[i].value>n){n=1*e[i].value}if(1*e[i].value<r){r=1*e[i].value}}if(Math.abs(n-r)<1e-8){n=Max([n*2,1]);r=0}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;var s=Math.floor(u/(o*.66));var a=Math.floor(u/o*.5);return{maxValue:n,minValue:r,maxSteps:s,minSteps:a}}var r,i,s,o,u,a,f,l,c,h;if(typeof n.ChartNewId==undefined){var p=new Date;var d=p.getTime();n.ChartNewId="PolarArea_"+d}if(!dynamicFunction(e,t,n,"PolarArea"))return;var v=t.startAngle*(Math.PI/180)+2*Math.PI;while(t.startAngle<0){t.startAngle+=360}while(t.startAngle>360){t.startAngle-=360}while(v<0){v+=2*Math.PI}while(v>2*Math.PI){v-=2*Math.PI}t.logarithmic=false;if(typeof jsGraphAnnotate[n.ChartNewId]=="undefined")jsGraphAnnotate[n.ChartNewId]=new Array;else if(!t.multiGraph)clearAnnotate(n.ChartNewId);defMouse(n,e,t,"PolarArea");setRect(n,t);a=y();f=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){s=calculateScale(t,a.maxSteps,a.minSteps,a.maxValue,a.minValue,f);l=setMeasures(e,t,n,height,width,s.labels,true,false,false,false,true)}else{s={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]};populateLabels(t,f,s.labels,s.steps,t.scaleStartValue,s.graphMax,t.scaleStepWidth);l=setMeasures(e,t,n,height,width,s.labels,true,false,false,false,true)}c=l.leftNotUsableSize+l.availableWidth/2;h=l.topNotUsableSize+l.availableHeight/2;i=Math.floor((Min([l.availableHeight,l.availableWidth])/2-5)/s.steps);animationLoop(t,g,m,n,l.clrx,l.clry,l.clrwidth,l.clrheight,c,h,c-(Min([l.availableHeight,l.availableWidth])/2-5),h+(Min([l.availableHeight,l.availableWidth])/2-5),e);};var Radar=function(e,t,n){function v(r){var o=new Array;var u=new Array;for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){o[f]=0;u[f]=-999999999}}for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){o[f]+=1*e.datasets[a].data[f];u[f]=Max([u[f],1*e.datasets[a].data[f]])}}}var l=2*Math.PI/e.datasets[0].data.length;n.save();for(var a=0;a<e.datasets.length;a++){if(r>=1){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt=""}var p=-1;for(var f=0;f<e.datasets[a].data.length;f++){var d=animationCorrection(r,e,t,a,f,1).animVal;if(d>1)d=d-1;if(!(typeof e.datasets[a].data[f]=="undefined")){if(p==-1){n.beginPath();n.moveTo(c+d*Math.cos(t.startAngle*Math.PI/180-f*l)*calculateOffset(t,e.datasets[a].data[f],s,i),h-d*Math.sin(t.startAngle*Math.PI/180-f*l)*calculateOffset(t,e.datasets[a].data[f],s,i));p=f}else{n.lineTo(c+d*Math.cos(t.startAngle*Math.PI/180-f*l)*calculateOffset(t,e.datasets[a].data[f],s,i),h-d*Math.sin(t.startAngle*Math.PI/180-f*l)*calculateOffset(t,e.datasets[a].data[f],s,i))}if(r>=1){if(a==0)divprev=0;else divprev=e.datasets[a].data[f]-e.datasets[a-1].data[f];if(a==e.datasets.length-1)divnext=0;else divnext=e.datasets[a+1].data[f]-e.datasets[a].data[f];if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();else lgtxt2="";jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["POINT",c+Math.cos(t.startAngle*Math.PI/180-f*l)*calculateOffset(t,e.datasets[a].data[f],s,i),h-Math.sin(t.startAngle*Math.PI/180-f*l)*calculateOffset(t,e.datasets[a].data[f],s,i),lgtxt,lgtxt2,1*e.datasets[a].data[f],divprev,divnext,u[f],o[f],a,f]}}}n.closePath();if(t.datasetFill){if(typeof e.datasets[a].fillColor=="function")n.fillStyle=e.datasets[a].fillColor("FILLCOLOR",e,t,a,-1,d,-1);else if(typeof e.datasets[a].fillColor=="string")n.fillStyle=e.datasets[a].fillColor;else n.fillStyle=t.defaultFillColor}else n.fillStyle="rgba(0,0,0,0)";if(typeof e.datasets[a].strokeColor=="function")n.strokeStyle=e.datasets[a].strokeColor("STROKECOLOR",e,t,a,-1,d,-1);else if(typeof e.datasets[a].strokeColor=="string")n.strokeStyle=e.datasets[a].strokeColor;else n.strokeStyle=t.defaultStrokeColor;n.lineWidth=t.datasetStrokeWidth;n.fill();n.stroke();if(t.pointDot&&(!t.animationLeftToRight||t.animationLeftToRight&&r>=1)){n.beginPath();if(typeof e.datasets[a].pointColor=="function")n.fillStyle=e.datasets[a].pointColor("POINTCOLOR",e,t,a,-1,d,-1);else n.fillStyle=e.datasets[a].pointColor;if(typeof e.datasets[a].pointStrokeColor=="function")n.strokeStyle=e.datasets[a].pointStrokeColor("POINTSTROKECOLOR",e,t,a,-1,d,-1);else n.strokeStyle=e.datasets[a].pointStrokeColor;n.lineWidth=t.pointDotStrokeWidth;for(var v=0;v<e.datasets[a].data.length;v++){if(!(typeof e.datasets[a].data[v]=="undefined")){n.beginPath();n.arc(c+d*Math.cos(t.startAngle*Math.PI/180-v*l)*calculateOffset(t,e.datasets[a].data[v],s,i),h-d*Math.sin(t.startAngle*Math.PI/180-v*l)*calculateOffset(t,e.datasets[a].data[v],s,i),t.pointDotRadius,2*Math.PI,false);n.fill();n.stroke()}}}}n.restore();if(r>=1&&t.inGraphDataShow){for(var a=0;a<e.datasets.length;a++){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt="";for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){if(a==0)divprev=0;else divprev=e.datasets[a].data[f]-e.datasets[a-1].data[f];if(a==e.datasets.length-1)divnext=0;else divnext=e.datasets[a+1].data[f]-e.datasets[a].data[f];if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();else lgtxt2="";n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;if(t.inGraphDataAlign=="off-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(t.startAngle*Math.PI/180-f*l+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(t.startAngle*Math.PI/180-f*l+4*Math.PI)%(2*Math.PI)<=Math.PI/2)n.textAlign="left";else n.textAlign="right"}else if(t.inGraphDataAlign=="to-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(t.startAngle*Math.PI/180-f*l+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(t.startAngle*Math.PI/180-f*l+4*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="right";else n.textAlign="left"}else n.textAlign=t.inGraphDataAlign;if(t.inGraphDataVAlign=="off-center"){if((t.startAngle*Math.PI/180-f*l+4*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="bottom";else n.textBaseline="top"}else if(t.inGraphDataVAlign=="to-center"){if((t.startAngle*Math.PI/180-f*l+4*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="top";else n.textBaseline="bottom"}else n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var m;if(t.inGraphDataRadiusPosition==1)m=0+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==2)m=calculateOffset(t,e.datasets[a].data[f],s,i)/2+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==3)m=calculateOffset(t,e.datasets[a].data[f],s,i)+t.inGraphDataPaddingRadius;n.translate(c+Math.cos(t.startAngle*Math.PI/180-f*l)*m,h-Math.sin(t.startAngle*Math.PI/180-f*l)*m);if(t.inGraphDataRotate=="inRadiusAxis")n.rotate(f*l);else if(t.inGraphDataRotate=="inRadiusAxisRotateLabels"){if((f*l+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(f*l+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)n.rotate(3*Math.PI+f*l);else n.rotate(2*Math.PI+f*l)}else n.rotate(t.inGraphDataRotate*(Math.PI/180));var g=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[a].data[f],t.fmtV3),v4:fmtChartJS(t,divprev,t.fmtV4),v5:fmtChartJS(t,divnext,t.fmtV5),v6:fmtChartJS(t,u[f],t.fmtV6),v7:fmtChartJS(t,o[f],t.fmtV7),v8:roundToWithThousands(t,fmtChartJS(t,100*e.datasets[a].data[f]/o[f],t.fmtV8),t.roundPct),v9:fmtChartJS(t,c+Math.cos(t.startAngle*Math.PI/180-f*l)*calculateOffset(t,e.datasets[a].data[f],s,i),t.fmtV9),v10:fmtChartJS(t,h-Math.sin(t.startAngle*Math.PI/180-f*l)*calculateOffset(t,e.datasets[a].data[f],s,i),t.fmtV10),v11:fmtChartJS(t,a,t.fmtV11),v12:fmtChartJS(t,f,t.fmtV12),data:e});n.fillTextMultiLine(g,0,0,n.textBaseline,t.inGraphDataFontSize);n.restore()}}}}}function m(){var o=2*Math.PI/e.datasets[0].data.length;n.save();n.translate(c,h);n.rotate((90-t.startAngle)*Math.PI/180);if(t.angleShowLineOut){n.strokeStyle=t.angleLineColor;n.lineWidth=t.angleLineWidth;for(var u=0;u<e.datasets[0].data.length;u++){n.rotate(o);n.beginPath();n.moveTo(0,0);n.lineTo(0,-r);n.stroke()}}for(var a=0;a<s.steps;a++){n.beginPath();if(t.scaleShowLine){n.strokeStyle=t.scaleLineColor;n.lineWidth=t.scaleLineWidth;n.moveTo(0,-i*(a+1));for(var f=0;f<e.datasets[0].data.length;f++){n.rotate(o);n.lineTo(0,-i*(a+1))}n.closePath();n.stroke()}}n.rotate(-(90-t.startAngle)*Math.PI/180);if(t.scaleShowLabels){for(var a=0;a<s.steps;a++){n.textAlign="center";n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;n.textBaseline="middle";if(t.scaleShowLabelBackdrop){var l=n.measureTextMultiLine(s.labels[a+1],t.scaleFontSize).textWidth;n.fillStyle=t.scaleBackdropColor;n.beginPath();n.rect(Math.round(Math.cos(t.startAngle*Math.PI/180)*i*(a+1)-l/2-t.scaleBackdropPaddingX),Math.round(-Math.sin(t.startAngle*Math.PI/180)*i*(a+1)-t.scaleFontSize*.5-t.scaleBackdropPaddingY),Math.round(l+t.scaleBackdropPaddingX*2),Math.round(t.scaleFontSize+t.scaleBackdropPaddingY*2));n.fill()}n.fillStyle=t.scaleFontColor;n.fillTextMultiLine(s.labels[a+1],Math.cos(t.startAngle*Math.PI/180)*i*(a+1),-Math.sin(t.startAngle*Math.PI/180)*i*(a+1),n.textBaseline,t.scaleFontSize)}}for(var p=0;p<e.labels.length;p++){n.font=t.pointLabelFontStyle+" "+t.pointLabelFontSize+"px "+t.pointLabelFontFamily;n.fillStyle=t.pointLabelFontColor;var d=Math.sin((90-t.startAngle)*Math.PI/180+o*p)*(r+t.pointLabelFontSize);var v=Math.cos((90-t.startAngle)*Math.PI/180+o*p)*(r+t.pointLabelFontSize);var m=(90-t.startAngle)*Math.PI/180+o*p;while(m<0)m=m+2*Math.PI;while(m>2*Math.PI)m=m-2*Math.PI;if(m==Math.PI||m==0){n.textAlign="center"}else if(m>Math.PI){n.textAlign="right"}else{n.textAlign="left"}n.textBaseline="middle";n.fillTextMultiLine(e.labels[p],d,-v,n.textBaseline,t.pointLabelFontSize)}n.restore()}function g(){var i,s,u,a,f,h,p,d;var v=2*Math.PI/e.datasets[0].data.length;var m=t.startAngle*Math.PI/180;n.font=t.pointLabelFontStyle+" "+t.pointLabelFontSize+"px "+t.pointLabelFontFamily;if(!t.graphMaximized){a=l.availableWidth/2;u=l.availableWidth/2;h=1}else{a=l.availableWidth/2;u=l.availableWidth/2;h=40;for(var g=0;g<e.labels.length;g++){var y=n.measureTextMultiLine(e.labels[g],t.scaleFontSize).textWidth+n.measureTextMultiLine(e.labels[g],t.scaleFontSize).textHeight;s=(l.availableWidth-y)/(1+Math.abs(Math.cos(m)));if(m<Math.PI/2&&m>-Math.PI/2||m>3*Math.PI/2){if(s<a)a=s}else if(Math.cos(m)!=0){if(s<u)u=s}m-=v}}p=0;d=0;c=a+l.rightNotUsableSize;for(i=a,f=0;f<h;++f,i+=(l.availableWidth-u-a)/h){r=Max([i,l.availableWidth-i]);var m=t.startAngle*Math.PI/180;s=l.available;for(var g=0;g<e.labels.length;g++){var y=n.measureTextMultiLine(e.labels[g],t.scaleFontSize).textWidth+n.measureTextMultiLine(e.labels[g],t.scaleFontSize).textHeight;if(m<Math.PI/2&&m>-Math.PI/2||m>3*Math.PI/2){s=(l.availableWidth-i-y)/Math.abs(Math.cos(m))}else if(Math.cos(m!=0)){s=(i-y)/Math.abs(Math.cos(m))}if(s<r)r=s;if(Math.sin(m)*l.availableHeight/2>l.availableHeight/2-t.scaleFontSize*2){s=Math.sin(m)*l.availableHeight/2-1.5*t.scaleFontSize;if(s<r)r=s}m-=v}if(r>p){p=r;c=i+l.rightNotUsableSize}}r=p-t.scaleFontSize/2;o=Default(o,5)}function y(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;for(var i=0;i<e.datasets.length;i++){for(var s=0;s<e.datasets[i].data.length;s++){if(1*e.datasets[i].data[s]>n){n=1*e.datasets[i].data[s]}if(1*e.datasets[i].data[s]<r){r=1*e.datasets[i].data[s]}}}if(Math.abs(n-r)<1e-8){n=Max([n*2,1]);r=0}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;var a=Math.floor(u/(o*.66));var f=Math.floor(u/o*.5);return{maxValue:n,minValue:r,maxSteps:a,minSteps:f}}var r,i,s,o,u,a,f,l,c,h;if(typeof n.ChartNewId=="undefined"){var p=new Date;var d=p.getTime();n.ChartNewId="Radar_"+d}if(!dynamicFunction(e,t,n,"Radar"))return;while(t.startAngle<0){t.startAngle+=360}while(t.startAngle>360){t.startAngle-=360}t.logarithmic=false;if(typeof jsGraphAnnotate[n.ChartNewId]=="undefined")jsGraphAnnotate[n.ChartNewId]=new Array;else if(!t.multiGraph)clearAnnotate(n.ChartNewId);defMouse(n,e,t,"Radar");if(!e.labels)e.labels=[];setRect(n,t);a=y();f=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){s=calculateScale(t,a.maxSteps,a.minSteps,a.maxValue,a.minValue,f);l=setMeasures(e,t,n,height,width,s.labels,true,false,false,true,t.datasetFill)}else{s={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]};populateLabels(t,f,s.labels,s.steps,t.scaleStartValue,s.graphMax,t.scaleStepWidth);l=setMeasures(e,t,n,height,width,s.labels,true,false,false,true,t.datasetFill)}g();h=l.topNotUsableSize+l.availableHeight/2;i=r/s.steps;animationLoop(t,m,v,n,l.clrx,l.clry,l.clrwidth,l.clrheight,c,h,c-r,h+r,e);};var Pie=function(e,t,n){function c(i){var a=-t.startAngle*(Math.PI/180)+2*Math.PI,f=0,l=1,c=1;var h=t.startAngle*(Math.PI/180)+2*Math.PI;while(a<0){a+=2*Math.PI}while(a>2*Math.PI){a-=2*Math.PI}while(h<0){h+=2*Math.PI}while(h>2*Math.PI){h-=2*Math.PI}if(t.animation){if(t.animateScale){l=i}if(t.animateRotate){c=i}}if(i>=1){totvalue=0;for(var p=0;p<e.length;p++)if(!(typeof e[p].value=="undefined"))totvalue+=1*e[p].value}for(var p=0;p<e.length;p++){correctedRotateAnimation=animationCorrection(c,e,t,p,-1,0).mainVal;if(!(typeof e[p].value=="undefined")){var d=correctedRotateAnimation*1*e[p].value/r*Math.PI*2;if(d>=Math.PI*2)d=Math.PI*2-.001;n.beginPath();n.arc(s,o,l*u,a,a+d);n.lineTo(s,o);n.closePath();if(typeof e[p].color=="function")n.fillStyle=e[p].color("COLOR",e,t,p,-1,i,e[p].value);else n.fillStyle=e[p].color;n.fill();a+=d;f+=1*e[p].value;if(t.segmentShowStroke){n.lineWidth=t.segmentStrokeWidth;n.strokeStyle=t.segmentStrokeColor;n.stroke()}if(i>=1){if(typeof e[p].title=="string")lgtxt=e[p].title.trim();else lgtxt="";jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["ARC",s,o,0,u,a-d,a,lgtxt,1*e[p].value,f,totvalue,d,p];if(t.inGraphDataShow){if(t.inGraphDataAnglePosition==1)posAngle=h+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)posAngle=h-d/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)posAngle=h-d+t.inGraphDataPaddingAngle*(Math.PI/180);if(t.inGraphDataRadiusPosition==1)labelRadius=0+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==2)labelRadius=u/2+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==3)labelRadius=u+t.inGraphDataPaddingRadius;h-=d;n.save();if(t.inGraphDataAlign=="off-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="left";else n.textAlign="right"}else if(t.inGraphDataAlign=="to-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="right";else n.textAlign="left"}else n.textAlign=t.inGraphDataAlign;if(t.inGraphDataVAlign=="off-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="top";else n.textBaseline="bottom"}else if(t.inGraphDataVAlign=="to-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="bottom";else n.textBaseline="top"}else n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var v=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[p].value,t.fmtV2),v3:fmtChartJS(t,f,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,d,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[p].value/totvalue,t.fmtV6),t.roundPct),v7:fmtChartJS(t,s,t.fmtV7),v8:fmtChartJS(t,o,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,u,t.fmtV10),v11:fmtChartJS(t,a-d,t.fmtV11),v12:fmtChartJS(t,a,t.fmtV12),v13:fmtChartJS(t,p,t.fmtV13),data:e});n.translate(s+labelRadius*Math.cos(posAngle),o-labelRadius*Math.sin(posAngle));if(t.inGraphDataRotate=="inRadiusAxis")n.rotate(2*Math.PI-posAngle);else if(t.inGraphDataRotate=="inRadiusAxisRotateLabels"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)n.rotate(3*Math.PI-posAngle);else n.rotate(2*Math.PI-posAngle)}else n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillTextMultiLine(v,0,0,n.textBaseline,t.inGraphDataFontSize);n.restore()}}}}}function h(){var a;var f=-t.startAngle*(Math.PI/180)+2*Math.PI,l=0;while(f<0){f+=2*Math.PI}while(f>2*Math.PI){f-=2*Math.PI}s=i.leftNotUsableSize+i.availableWidth/2;o=i.topNotUsableSize+i.availableHeight/2;u=Min([i.availableHeight/2,i.availableWidth/2])-5;if(t.inGraphDataShow&&t.inGraphDataRadiusPosition==3&&t.inGraphDataAlign=="off-center"&&t.inGraphDataRotate==0){u=Min([i.availableHeight/2,i.availableWidth/2])-t.inGraphDataFontSize-t.inGraphDataPaddingRadius-5;var c=t.startAngle*(Math.PI/180)+2*Math.PI;while(c<0){c+=2*Math.PI}while(c>2*Math.PI){c-=2*Math.PI}var h=0;for(var p=0;p<e.length;p++)if(!(typeof e[p].value=="undefined"))h+=1*e[p].value;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;var l=0;var d;for(var p=0;p<e.length;p++){if(!(typeof e[p].value=="undefined")){l+=1*e[p].value;var v=1*e[p].value/r*Math.PI*2;f+=v;if(t.inGraphDataAnglePosition==1)d=c+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)d=c-v/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)d=c-v+t.inGraphDataPaddingAngle*(Math.PI/180);c-=v;if(typeof e[p].title=="string")a=e[p].title.trim();else a="";var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,a,t.fmtV1),v2:fmtChartJS(t,1*e[p].value,t.fmtV2),v3:fmtChartJS(t,l,t.fmtV3),v4:fmtChartJS(t,h,t.fmtV4),v5:fmtChartJS(t,v,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[p].value/h,t.fmtV6),t.roundPct),v7:fmtChartJS(t,s,t.fmtV7),v8:fmtChartJS(t,o,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,u,t.fmtV10),v11:fmtChartJS(t,f-v,t.fmtV11),v12:fmtChartJS(t,f,t.fmtV12),v13:fmtChartJS(t,p,t.fmtV13),data:e});var g=n.measureText(m).width;var y=Math.abs((i.availableWidth/2-g)/Math.cos(d))-t.inGraphDataPaddingRadius-5;if(y<u)u=y}}}u=u*t.radiusScale}var r=0;var i,s,o,u;if(typeof n.ChartNewId=="undefined"){var a=new Date;var f=a.getTime();n.ChartNewId="Pie_"+f}if(!dynamicFunction(e,t,n,"Pie"))return;while(t.startAngle<0){t.startAngle+=360}while(t.startAngle>360){t.startAngle-=360}t.logarithmic=false;if(typeof jsGraphAnnotate[n.ChartNewId]=="undefined")jsGraphAnnotate[n.ChartNewId]=new Array;else if(!t.multiGraph)clearAnnotate(n.ChartNewId);defMouse(n,e,t,"Pie");setRect(n,t);i=setMeasures(e,t,n,height,width,null,true,false,false,false,true);for(var l=0;l<e.length;l++){if(!(typeof e[l].value=="undefined"))r+=1*e[l].value}h();animationLoop(t,null,c,n,i.clrx,i.clry,i.clrwidth,i.clrheight,s,o,s-u,o+u,e);};var Doughnut=function(e,t,n){function p(i){var a=-t.startAngle*(Math.PI/180)+2*Math.PI,f=0,h=1,p=1;while(a<0){a+=2*Math.PI}while(a>2*Math.PI){a-=2*Math.PI}if(t.animation){if(t.animateScale){h=i}if(t.animateRotate){p=i}}if(i>=1){totvalue=0;for(var d=0;d<e.length;d++)if(!(typeof e[d].value=="undefined"))totvalue+=1*e[d].value}for(var d=0;d<e.length;d++){correctedRotateAnimation=animationCorrection(p,e,t,d,-1,0).mainVal;if(!(typeof e[d].value=="undefined")){var v=correctedRotateAnimation*1*e[d].value/r*Math.PI*2;if(v>=Math.PI*2)v=Math.PI*2-.001;n.beginPath();n.arc(s,o,h*u,a,a+v,false);n.arc(s,o,h*c,a+v,a,true);n.closePath();if(typeof e[d].color=="function")n.fillStyle=e[d].color("COLOR",e,t,d,-1,i,e[d].value);else n.fillStyle=e[d].color;n.fill();a+=v;f+=1*e[d].value;if(t.segmentShowStroke){n.lineWidth=t.segmentStrokeWidth;n.strokeStyle=t.segmentStrokeColor;n.stroke()}if(i>=1){if(typeof e[d].title=="string")lgtxt=e[d].title.trim();else lgtxt="";jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["ARC",s,o,c,u,a-v,a,lgtxt,1*e[d].value,f,totvalue,v,d];if(t.inGraphDataShow){if(t.inGraphDataAnglePosition==1)posAngle=l+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)posAngle=l-v/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)posAngle=l-v+t.inGraphDataPaddingAngle*(Math.PI/180);if(t.inGraphDataRadiusPosition==1)labelRadius=c+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==2)labelRadius=c+(u-c)/2+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==3)labelRadius=u+t.inGraphDataPaddingRadius;l-=v;n.save();if(t.inGraphDataAlign=="off-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="left";else n.textAlign="right"}else if(t.inGraphDataAlign=="to-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="right";else n.textAlign="left"}else n.textAlign=t.inGraphDataAlign;if(t.inGraphDataVAlign=="off-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="top";else n.textBaseline="bottom"}else if(t.inGraphDataVAlign=="to-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="bottom";else n.textBaseline="top"}else n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[d].value,t.fmtV2),v3:fmtChartJS(t,f,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,v,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[d].value/totvalue,t.fmtV6),t.roundPct),v7:fmtChartJS(t,s,t.fmtV7),v8:fmtChartJS(t,o,t.fmtV8),v9:fmtChartJS(t,c,t.fmtV9),v10:fmtChartJS(t,u,t.fmtV10),v11:fmtChartJS(t,a-v,t.fmtV11),v12:fmtChartJS(t,a,t.fmtV12),v13:fmtChartJS(t,d,t.fmtV13)});n.translate(s+labelRadius*Math.cos(posAngle),o-labelRadius*Math.sin(posAngle));if(t.inGraphDataRotate=="inRadiusAxis")n.rotate(2*Math.PI-posAngle);else if(t.inGraphDataRotate=="inRadiusAxisRotateLabels"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)n.rotate(3*Math.PI-posAngle);else n.rotate(2*Math.PI-posAngle)}else n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillTextMultiLine(m,0,0,n.textBaseline,t.inGraphDataFontSize);n.restore()}}}}}function d(){var a;var f=-t.startAngle*(Math.PI/180)+2*Math.PI,l=0;while(f<0){f+=2*Math.PI}while(f>2*Math.PI){f-=2*Math.PI}s=i.leftNotUsableSize+i.availableWidth/2;o=i.topNotUsableSize+i.availableHeight/2;u=Min([i.availableHeight/2,i.availableWidth/2])-5;if(t.inGraphDataShow&&t.inGraphDataRadiusPosition==3&&t.inGraphDataAlign=="off-center"&&t.inGraphDataRotate==0){u=Min([i.availableHeight/2,i.availableWidth/2])-t.inGraphDataFontSize-t.inGraphDataPaddingRadius-5;var h=t.startAngle*(Math.PI/180)+2*Math.PI;while(h<0){h+=2*Math.PI}while(h>2*Math.PI){h-=2*Math.PI}var p=0;for(var d=0;d<e.length;d++)if(!(typeof e[d].value=="undefined"))p+=1*e[d].value;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;var v;var f=0;for(var d=0;d<e.length;d++){if(!(typeof e[d].value=="undefined")){l+=1*e[d].value;var m=1*e[d].value/r*Math.PI*2;f+=m;if(t.inGraphDataAnglePosition==1)v=h+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)v=h-m/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)v=h-m+t.inGraphDataPaddingAngle*(Math.PI/180);h-=m;if(typeof e[d].title=="string")a=e[d].title.trim();else a="";var g=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,a,t.fmtV1),v2:fmtChartJS(t,1*e[d].value,t.fmtV2),v3:fmtChartJS(t,l,t.fmtV3),v4:fmtChartJS(t,p,t.fmtV4),v5:fmtChartJS(t,m,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[d].value/p,t.fmtV6),t.roundPct),v7:fmtChartJS(t,s,t.fmtV7),v8:fmtChartJS(t,o,t.fmtV8),v9:fmtChartJS(t,c,t.fmtV9),v10:fmtChartJS(t,u,t.fmtV10),v11:fmtChartJS(t,f-m,t.fmtV11),v12:fmtChartJS(t,f,t.fmtV12),v13:fmtChartJS(t,d,t.fmtV13),data:e});var y=n.measureText(g).width;var b=Math.abs((i.availableWidth/2-y)/Math.cos(v))-t.inGraphDataPaddingRadius-5;if(b<u)u=b}}}u=u*t.radiusScale}var r=0;var i,s,o,u;if(typeof n.ChartNewId=="undefined"){var a=new Date;var f=a.getTime();n.ChartNewId="Doughnut_"+f}if(!dynamicFunction(e,t,n,"Doughnut"))return;var l=t.startAngle*(Math.PI/180)+2*Math.PI;while(t.startAngle<0){t.startAngle+=360}while(t.startAngle>360){t.startAngle-=360}while(l<0){l+=2*Math.PI}while(l>2*Math.PI){l-=2*Math.PI}t.logarithmic=false;if(typeof jsGraphAnnotate[n.ChartNewId]=="undefined")jsGraphAnnotate[n.ChartNewId]=new Array;else if(!t.multiGraph)clearAnnotate(n.ChartNewId);defMouse(n,e,t,"Doughnut");setRect(n,t);i=setMeasures(e,t,n,height,width,null,true,false,false,false,true);d();var c=u*(t.percentageInnerCutout/100);for(var h=0;h<e.length;h++){if(!(typeof e[h].value=="undefined"))r+=1*e[h].value}animationLoop(t,null,p,n,i.clrx,i.clry,i.clrwidth,i.clrheight,s,o,s-u,o+u,e);};var Line=function(data,config,ctx){function drawLines(e){drawLinesDataset(e,data,config,ctx,offsets,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale});if(e>=1){if(typeof drawMath=="function"){drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset})}}}function drawScale(){if(config.drawXScaleLine!==false){for(var e=0;e<config.drawXScaleLine.length;e++){ctx.lineWidth=config.drawXScaleLine[e].lineWidth?config.drawXScaleLine[e].lineWidth:config.scaleLineWidth;ctx.strokeStyle=config.drawXScaleLine[e].lineColor?config.drawXScaleLine[e].lineColor:config.scaleLineColor;ctx.beginPath();var t;switch(config.drawXScaleLine[e].position){case"bottom":t=xAxisPosY;break;case"top":t=xAxisPosY-msr.availableHeight-config.scaleTickSizeTop;break;case"0":case 0:if(zeroY!=0){t=xAxisPosY-zeroY}break}ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,t);ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,t);ctx.stroke()}}for(var n=0;n<data.labels.length;n++){ctx.beginPath();ctx.moveTo(yAxisPosX+n*valueHop,xAxisPosY+config.scaleTickSizeBottom);ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;if(config.scaleShowGridLines&&n>0&&n%config.scaleXGridLinesStep==0){ctx.lineTo(yAxisPosX+n*valueHop,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop)}else{ctx.lineTo(yAxisPosX+n*valueHop,xAxisPosY)}ctx.stroke()}ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(yAxisPosX,xAxisPosY+config.scaleTickSizeBottom);ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop);ctx.stroke();for(var r=0;r<calculatedScale.steps;r++){ctx.beginPath();ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY-(r+1)*scaleHop);ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;if(config.scaleShowGridLines&&r%config.scaleYGridLinesStep==0){ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY-(r+1)*scaleHop)}else{ctx.lineTo(yAxisPosX,xAxisPosY-(r+1)*scaleHop)}ctx.stroke()}}function drawLabels(){ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;if(config.xAxisTop||config.xAxisBottom){ctx.textBaseline="top";if(msr.rotateLabels>90){ctx.save();ctx.textAlign="left"}else if(msr.rotateLabels>0){ctx.save();ctx.textAlign="right"}else{ctx.textAlign="center"}ctx.fillStyle=config.scaleFontColor;if(config.xAxisBottom){for(var e=0;e<data.labels.length;e++){ctx.save();if(msr.rotateLabels>0){ctx.translate(yAxisPosX+e*valueHop-msr.highestXLabel/2,msr.xLabelPos);ctx.rotate(-(msr.rotateLabels*(Math.PI/180)));ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),0,0,ctx.textBaseline,config.scaleFontSize)}else{ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),yAxisPosX+e*valueHop,msr.xLabelPos,ctx.textBaseline,config.scaleFontSize)}ctx.restore()}}}ctx.textAlign="right";ctx.textBaseline="middle";for(var t=config.showYAxisMin?-1:0;t<calculatedScale.steps;t++){if(config.scaleShowLabels){if(config.yAxisLeft){ctx.textAlign="right";ctx.fillTextMultiLine(calculatedScale.labels[t+1],yAxisPosX-(config.scaleTickSizeLeft+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)}if(config.yAxisRight){ctx.textAlign="left";ctx.fillTextMultiLine(calculatedScale.labels[t+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)}}}}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation;var mathValueHeight=0;if(typeof eval(mathFctName)=="function"){var parameter={data:data,datasetNr:i};mathValueHeight=window[mathFctName](parameter)}for(var j=0;j<data.datasets[i].data.length;j++){if(1*data.datasets[i].data[j]+mathValueHeight>upperValue){upperValue=1*data.datasets[i].data[j]+mathValueHeight}if(1*data.datasets[i].data[j]-mathValueHeight<lowerValue){lowerValue=1*data.datasets[i].data[j]-mathValueHeight}}}if(Math.abs(upperValue-lowerValue)<1e-8){upperValue=Max([upperValue*2,1]);lowerValue=0}if(!isNaN(config.graphMin))lowerValue=config.graphMin;if(!isNaN(config.graphMax))upperValue=config.graphMax;labelHeight=config.scaleFontSize;scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(labelHeight*.66));var minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0,msr;var zeroY=0;var offsets=[];if(typeof ctx.ChartNewId=="undefined"){var cvdate=new Date;var cvmillsec=cvdate.getTime();ctx.ChartNewId="Line_"+cvmillsec}var mxlgt=0;for(var i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);if(mxlgt==1){if(typeof data.labels[0]=="string")data.labels=["",data.labels[0],""];for(var i=0;i<data.datasets.length;i++){if(typeof (data.datasets[i].data[0]!="undefined"))data.datasets[i].data=[undefined,data.datasets[i].data[0],undefined]}}if(!dynamicFunction(data,config,ctx,"Line"))return;if(typeof jsGraphAnnotate[ctx.ChartNewId]=="undefined")jsGraphAnnotate[ctx.ChartNewId]=new Array;else if(!config.multiGraph)clearAnnotate(ctx.ChartNewId);defMouse(ctx,data,config,"Line");setRect(ctx,config);msr=setMeasures(data,config,ctx,height,width,[""],false,false,true,true,config.datasetFill);valueBounds=getValueBounds();if(config.logarithmic!==false){if(valueBounds.minValue<=0){config.logarithmic=false}}var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));if(config.logarithmic=="fuzzy"&&OrderOfMagnitude<4||config.scaleOverride){config.logarithmic=false}labelTemplateString=config.scaleShowLabels?config.scaleLabel:"";if(!config.scaleOverride){calculatedScale=calculateScale(config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,false,false,true,true,config.datasetFill)}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,graphMax:config.scaleStartValue+config.scaleSteps*config.scaleStepWidth,labels:[]};populateLabels(config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,calculatedScale.graphMax,config.scaleStepWidth);msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,false,false,true,true,config.datasetFill)}msr.availableHeight=msr.availableHeight-config.scaleTickSizeBottom-config.scaleTickSizeTop;msr.availableWidth=msr.availableWidth-config.scaleTickSizeLeft-config.scaleTickSizeRight;scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps);valueHop=Math.floor(msr.availableWidth/(data.labels.length-1));if(valueHop==0||config.fullWidthGraph)valueHop=msr.availableWidth/(data.labels.length-1);msr.clrwidth=msr.clrwidth-(msr.availableWidth-(data.labels.length-1)*valueHop);msr.availableWidth=(data.labels.length-1)*valueHop;msr.availableHeight=calculatedScale.steps*scaleHop;yAxisPosX=msr.leftNotUsableSize+config.scaleTickSizeLeft;xAxisPosY=msr.topNotUsableSize+msr.availableHeight+config.scaleTickSizeTop;drawLabels();if(valueBounds.minValue<0){zeroY=calculateOffset(config,0,calculatedScale,scaleHop)}for(var i=0;i<data.datasets.length;i++){offsets[i]=[];for(var j=0;j<data.datasets[i].data.length;j++){offsets[i][j]=calculateOffset(config,data.datasets[i].data[j],calculatedScale,scaleHop)-zeroY}}animationLoop(config,drawScale,drawLines,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data);};var StackedBar=function(e,t,n){function E(r){n.lineWidth=t.barStrokeWidth;var o=new Array(e.datasets.length);var u=new Array(e.datasets.length);var a=new Array;var f=new Array;for(var c=0;c<e.datasets.length;c++){for(var h=0;h<e.datasets[c].data.length;h++){a[h]=0;f[h]=0}}for(var c=0;c<e.datasets.length;c++){for(var h=0;h<e.datasets[c].data.length;h++)if(!(typeof e.datasets[c].data[h]=="undefined")){f[h]+=1*e.datasets[c].data[h]}}for(var c=0;c<e.datasets.length;c++){if(r>=1){if(typeof e.datasets[c].title=="string")lgtxt=e.datasets[c].title.trim();else lgtxt=""}for(var h=0;h<e.datasets[c].data.length;h++){var m=animationCorrection(r,e,t,c,h,1).animVal;if(m>1)m=m-1;n.fillStyle=t.defaultFillColor;if(typeof e.datasets[c].fillColor=="function")n.fillStyle=e.datasets[c].fillColor("FILLCOLOR",e,t,c,h,m,1*e.datasets[c].data[h]);else if(typeof e.datasets[c].fillColor=="string"){n.fillStyle=e.datasets[c].fillColor}else if(typeof e.datasets[c].fillColor=="object"){if(typeof e.datasets[c].fillColor[0]=="string"){n.fillStyle=e.datasets[c].fillColor[Min([e.datasets[c].fillColor.length-1,h])]}}n.strokeStyle=t.defaultStrokeColor;if(typeof e.datasets[c].strokeColor=="function")n.strokeStyle=e.datasets[c].strokeColor("STROKECOLOR",e,t,c,h,m,1*e.datasets[c].data[h]);else if(typeof e.datasets[c].strokeColor=="string"){n.strokeStyle=e.datasets[c].strokeColor}else if(typeof e.datasets[c].strokeColor=="object"){if(typeof e.datasets[c].strokeColor[0]=="string"){n.strokeStyle=e.datasets[c].strokeColor[Min([e.datasets[c].strokeColor.length-1,h])]}}if(c==0){o[h]=0;u[h]=-1}if(!(typeof e.datasets[c].data[h]=="undefined")){var g=p+t.barValueSpacing+l*h;n.beginPath();n.moveTo(g,d-o[h]+1);n.lineTo(g,d-m*calculateOffset(t,(u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,i)+t.barStrokeWidth/2-o[h]);n.lineTo(g+v,d-m*calculateOffset(t,(u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,i)+t.barStrokeWidth/2-o[h]);n.lineTo(g+v,d-o[h]+1);if(t.barShowStroke)n.stroke();n.closePath();n.fill();a[h]+=1*e.datasets[c].data[h];if(r>=1){if(typeof e.labels[h]=="string")lgtxt2=e.labels[h].trim();else lgtxt2="";jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["RECT",g,d-o[h]+1,g+v,d-calculateOffset(t,(u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,i)+t.barStrokeWidth/2-o[h],lgtxt,lgtxt2,1*e.datasets[c].data[h],a[h],f[h],c,h]}o[h]+=m*calculateOffset(t,(u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,i)-t.barStrokeWidth/2;if(u[h]==-1)u[h]=c}}}if(r>=1&&t.inGraphDataShow){var y=0,b=0;for(var c=0;c<e.datasets.length;c++){for(var h=0;h<e.datasets[c].data.length;h++){a[h]=0}}for(var c=0;c<e.datasets.length;c++){if(typeof e.datasets[c].title=="string")lgtxt=e.datasets[c].title.trim();else lgtxt="";for(var h=0;h<e.datasets[c].data.length;h++){if(c==0){o[h]=0;u[h]=-1}if(!(typeof e.datasets[c].data[h]=="undefined")){n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;if(typeof e.labels[h]=="string")lgtxt2=e.labels[h].trim();else lgtxt2="";a[h]+=1+e.datasets[c].data[h];var w=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[c].data[h],t.fmtV3),v4:fmtChartJS(t,a[h],t.fmtV4),v5:fmtChartJS(t,f[h],t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e.datasets[c].data[h]/f[h],t.fmtV6),t.roundPct),v7:fmtChartJS(t,g,t.fmtV7),v8:fmtChartJS(t,d,t.fmtV8),v9:fmtChartJS(t,g+v,t.fmtV9),v10:fmtChartJS(t,d-calculateOffset(t,e.datasets[c].data[h],s,i)+t.barStrokeWidth/2,t.fmtV10),v11:fmtChartJS(t,c,t.fmtV11),v12:fmtChartJS(t,h,t.fmtV12),data:e});var g=p+t.barValueSpacing+l*h;n.beginPath();n.beginPath();y=0;b=0;if(t.inGraphDataXPosition==1){b=g+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==2){b=g+v/2+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==3){b=g+v+t.inGraphDataPaddingX}if(t.inGraphDataYPosition==1){y=d-o[h]-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==2){y=d-(calculateOffset(t,(u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,i)+t.barStrokeWidth/2)/2-o[h]-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==3){y=d-calculateOffset(t,(u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,i)+t.barStrokeWidth/2-o[h]-t.inGraphDataPaddingY}n.translate(b,y);n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillTextMultiLine(w,0,0,n.textBaseline,t.inGraphDataFontSize);n.restore();o[h]+=m*calculateOffset(t,(u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,i)-t.barStrokeWidth/2;if(u[h]==-1)u[h]=c}}}}}function S(){n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(p-t.scaleTickSizeLeft,d);n.lineTo(p+g.availableWidth+t.scaleTickSizeRight,d);n.stroke();for(var r=0;r<e.labels.length;r++){n.beginPath();n.moveTo(p+r*l,d+t.scaleTickSizeBottom);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&r>0&&r%t.scaleXGridLinesStep==0){n.lineTo(p+r*l,d-g.availableHeight-t.scaleTickSizeTop)}else{n.lineTo(p+r*l,d)}n.stroke()}n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(p,d+t.scaleTickSizeBottom);n.lineTo(p,d-g.availableHeight-t.scaleTickSizeTop);n.stroke();for(var o=t.showYAxisMin?-1:0;o<s.steps;o++){n.beginPath();n.moveTo(p-t.scaleTickSizeLeft,d-(o+1)*i);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&o%t.scaleYGridLinesStep==0){n.lineTo(p+g.availableWidth+t.scaleTickSizeRight,d-(o+1)*i)}else{n.lineTo(p,d-(o+1)*i)}n.stroke()}}function x(){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;if(t.xAxisTop||t.xAxisBottom){n.textBaseline="top";if(g.rotateLabels>90){n.save();n.textAlign="left"}else if(g.rotateLabels>0){n.save();n.textAlign="right"}else{n.textAlign="center"}n.fillStyle=t.scaleFontColor;if(t.xAxisBottom){for(var r=0;r<e.labels.length;r++){n.save();if(g.rotateLabels>0){n.translate(p+r*l+v/2-g.highestXLabel/2,g.xLabelPos);n.rotate(-(g.rotateLabels*(Math.PI/180)));n.fillTextMultiLine(fmtChartJS(t,e.labels[r],t.fmtXLabel),0,0,n.textBaseline,t.scaleFontSize)}else{n.fillTextMultiLine(fmtChartJS(t,e.labels[r],t.fmtXLabel),p+r*l+v/2,g.xLabelPos,n.textBaseline,t.scaleFontSize)}n.restore()}}}n.textAlign="right";n.textBaseline="middle";for(var o=t.showYAxisMin?-1:0;o<s.steps;o++){if(t.scaleShowLabels){if(t.yAxisLeft){n.textAlign="right";n.fillTextMultiLine(s.labels[o+1],p-(t.scaleTickSizeLeft+t.yAxisSpaceRight),d-(o+1)*i,n.textBaseline,t.scaleFontSize)}if(t.yAxisRight){n.textAlign="left";n.fillTextMultiLine(s.labels[o+1],p+g.availableWidth+(t.scaleTickSizeRight+t.yAxisSpaceRight),d-(o+1)*i,n.textBaseline,t.scaleFontSize)}}}}function T(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;var i=new Array(e.datasets.length);var s=new Array(e.datasets.length);for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){var l=a;var c=0;if(!(typeof e.datasets[0].data[f]=="undefined")){c+=1*e.datasets[0].data[f];if(c>n){n=c}if(c<r){r=c}}while(l>0){if(!(typeof e.datasets[l].data[f]=="undefined")){c+=1*e.datasets[l].data[f];if(c>n){n=c}if(c<r){r=c}}l--}}}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;if(Math.abs(n-r)<1e-8){n=Max([n*2,1]);r=0}o=t.scaleFontSize;u=g.availableHeight;var h=Math.floor(u/(o*.66));var p=Math.floor(u/o*.5);return{maxValue:n,minValue:r,maxSteps:h,minSteps:p}}var r,i,s,o,u,a,f,l,c,h,p,d,v,m=0,g;if(typeof n.ChartNewId=="undefined"){var y=new Date;var b=y.getTime();n.ChartNewId="StackedBar_"+b}if(!dynamicFunction(e,t,n,"StackedBar"))return;t.logarithmic=false;if(typeof jsGraphAnnotate[n.ChartNewId]=="undefined")jsGraphAnnotate[n.ChartNewId]=new Array;else if(!t.multiGraph)clearAnnotate(n.ChartNewId);defMouse(n,e,t,"StackedBar");setRect(n,t);g=setMeasures(e,t,n,height,width,[""],true,false,true,true,true);a=T();f=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){s=calculateScale(t,a.maxSteps,a.minSteps,a.maxValue,a.minValue,f);g=setMeasures(e,t,n,height,width,s.labels,true,false,true,true,true)}else{s={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,labels:[]};for(var w=0;w<=s.steps;w++){if(f){s.labels.push(tmpl(f,{value:fmtChartJS(t,1*(t.scaleStartValue+t.scaleStepWidth*w).toFixed(getDecimalPlaces(t.scaleStepWidth)),t.fmtYLabel)}))}}g=setMeasures(e,t,n,height,width,s.labels,true,false,true,true,true)}g.availableHeight=g.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop;g.availableWidth=g.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight;i=Math.floor(g.availableHeight/s.steps);l=Math.floor(g.availableWidth/e.labels.length);if(l==0||t.fullWidthGraph)l=g.availableWidth/e.labels.length;g.clrwidth=g.clrwidth-(g.availableWidth-e.labels.length*l);g.availableWidth=e.labels.length*l;g.availableHeight=s.steps*i;p=g.leftNotUsableSize+t.scaleTickSizeLeft;d=g.topNotUsableSize+g.availableHeight+t.scaleTickSizeTop;v=l-t.scaleGridLineWidth*2-t.barValueSpacing*2-(t.barDatasetSpacing*e.datasets.length-1)-t.barStrokeWidth/2-1;x();animationLoop(t,S,E,n,g.clrx,g.clry,g.clrwidth,g.clrheight,p+g.availableWidth/2,d-g.availableHeight/2,p,d,e);};var HorizontalStackedBar=function(e,t,n){function E(e,t,n){var r=t.steps*t.stepValue;var i=e-t.graphMin;var s=CapValue(i/r,1,0);return n*t.steps*s}function S(r){n.lineWidth=t.barStrokeWidth;var o=new Array(e.datasets.length);var u=new Array(e.datasets.length);var a=new Array;var f=new Array;for(var c=0;c<e.datasets.length;c++){for(var h=0;h<e.datasets[c].data.length;h++){a[h]=0;f[h]=0}}for(var c=0;c<e.datasets.length;c++){for(var h=0;h<e.datasets[c].data.length;h++)if(!(typeof e.datasets[c].data[h]=="undefined")){f[h]+=1*e.datasets[c].data[h]}}for(var c=0;c<e.datasets.length;c++){if(r>=1){if(typeof e.datasets[c].title=="string")lgtxt=e.datasets[c].title.trim();else lgtxt=""}for(var h=0;h<e.datasets[c].data.length;h++){var m=animationCorrection(r,e,t,c,h,1).animVal;if(m>1)m=m-1;n.fillStyle=t.defaultFillColor;if(typeof e.datasets[c].fillColor=="function")n.fillStyle=e.datasets[c].fillColor("FILLCOLOR",e,t,c,h,m,1*e.datasets[c].data[h]);else if(typeof e.datasets[c].fillColor=="string"){n.fillStyle=e.datasets[c].fillColor}else if(typeof e.datasets[c].fillColor=="object"){if(typeof e.datasets[c].fillColor[0]=="string"){n.fillStyle=e.datasets[c].fillColor[Min([e.datasets[c].fillColor.length-1,h])]}}n.strokeStyle=t.defaultStrokeColor;if(typeof e.datasets[c].strokeColor=="function")n.strokeStyle=e.datasets[c].strokeColor("STROKECOLOR",e,t,c,h,m,1*e.datasets[c].data[h]);else if(typeof e.datasets[c].strokeColor=="string"){n.strokeStyle=e.datasets[c].strokeColor}else if(typeof e.datasets[c].strokeColor=="object"){if(typeof e.datasets[c].strokeColor[0]=="string"){n.strokeStyle=e.datasets[c].strokeColor[Min([e.datasets[c].strokeColor.length-1,h])]}}if(c==0){o[h]=0;u[h]=-1}if(!(typeof e.datasets[c].data[h]=="undefined")){var g=d+t.barValueSpacing-i*(h+1);n.beginPath();n.moveTo(p+o[h]+1,g);n.lineTo(p+o[h]+m*E((u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,l)+t.barStrokeWidth/2,g);n.lineTo(p+o[h]+m*E((u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,l)+t.barStrokeWidth/2,g+v);n.lineTo(p+o[h]+1,g+v);n.lineTo(p+o[h]+1,g);if(t.barShowStroke)n.stroke();n.closePath();n.fill();a[h]+=1*e.datasets[c].data[h];if(r>=1){if(typeof e.labels[h]=="string")lgtxt2=e.labels[h].trim();else lgtxt2="";jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["RECT",p+o[h]+1,g+v,p+o[h]+E((u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,l)+t.barStrokeWidth/2,g,lgtxt,lgtxt2,1*e.datasets[c].data[h],a[h],f[h],c,h]}o[h]+=m*E((u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,l)+t.barStrokeWidth/2;if(u[h]==-1)u[h]=c}}}if(r>=1&&t.inGraphDataShow){var y=0,b=0;for(var c=0;c<e.datasets.length;c++){for(var h=0;h<e.datasets[c].data.length;h++){a[h]=0}}for(var c=0;c<e.datasets.length;c++){if(typeof e.datasets[c].title=="string")lgtxt=e.datasets[c].title.trim();else lgtxt="";for(var h=0;h<e.datasets[c].data.length;h++){if(c==0){o[h]=0;u[h]=-1}if(!(typeof e.datasets[c].data[h]=="undefined")){n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;if(typeof e.labels[h]=="string")lgtxt2=e.labels[h].trim();else lgtxt2="";var g=d+t.barValueSpacing-i*(h+1);a[h]+=e.datasets[c].data[h];var w=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[c].data[h],t.fmtV3),v4:fmtChartJS(t,a[h],t.fmtV4),v5:fmtChartJS(t,f[h],t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e.datasets[c].data[h]/f[h],t.fmtV6),t.roundPct),v7:fmtChartJS(t,p,t.fmtV7),v8:fmtChartJS(t,g+v,t.fmtV8),v9:fmtChartJS(t,p+E(e.datasets[c].data[h],s,l)+t.barStrokeWidth/2,t.fmtV9),v10:fmtChartJS(t,g,t.fmtV10),v11:fmtChartJS(t,c,t.fmtV11),v12:fmtChartJS(t,h,t.fmtV12),data:e});n.beginPath();y=0;b=0;if(t.inGraphDataXPosition==1){b=p+o[h]+1+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==2){b=p+o[h]+(E((u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,l)+t.barStrokeWidth/2)/2+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==3){b=p+o[h]+E((u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,l)+t.barStrokeWidth/2+t.inGraphDataPaddingX}if(t.inGraphDataYPosition==1){y=g+v-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==2){y=g+v/2-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==3){y=g-t.inGraphDataPaddingY}n.translate(b,y);n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillTextMultiLine(w,0,0,n.textBaseline,t.inGraphDataFontSize);n.restore();o[h]+=m*E((u[h]>=0)*s.graphMin+1*e.datasets[c].data[h],s,l)+t.barStrokeWidth/2;if(u[h]==-1)u[h]=c}}}}}function x(){n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(p-t.scaleTickSizeLeft,d);n.lineTo(p+g.availableWidth,d);n.stroke();for(var r=t.showYAxisMin?-1:0;r<s.steps;r++){if(r>=0){n.beginPath();n.moveTo(p+r*l,d+t.scaleTickSizeBottom);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&r>0&&r%t.scaleXGridLinesStep==0){n.lineTo(p+r*l,d-g.availableHeight-t.scaleTickSizeTop)}else{n.lineTo(p+r*l,d)}n.stroke()}}n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(p,d+t.scaleTickSizeBottom);n.lineTo(p,d-g.availableHeight-t.scaleTickSizeTop);n.stroke();for(var o=0;o<e.labels.length;o++){n.beginPath();n.moveTo(p-t.scaleTickSizeLeft,d-(o+1)*i);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&o%t.scaleYGridLinesStep==0){n.lineTo(p+g.availableWidth,d-(o+1)*i)}else{n.lineTo(p,d-(o+1)*i)}n.stroke()}}function T(){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;if(t.xAxisTop||t.xAxisBottom){n.textBaseline="top";if(g.rotateLabels>90){n.save();n.textAlign="left"}else if(g.rotateLabels>0){n.save();n.textAlign="right"}else{n.textAlign="center"}n.fillStyle=t.scaleFontColor;if(t.xAxisBottom){for(var r=t.showYAxisMin?-1:0;r<s.steps;r++){n.save();if(g.rotateLabels>0){n.translate(p+(r+1)*l-g.highestXLabel/2,g.xLabelPos);n.rotate(-(g.rotateLabels*(Math.PI/180)));n.fillTextMultiLine(s.labels[r+1],0,0,n.textBaseline,t.scaleFontSize)}else{n.fillTextMultiLine(s.labels[r+1],p+(r+1)*l,g.xLabelPos,n.textBaseline,t.scaleFontSize)}n.restore()}}}n.textAlign="right";n.textBaseline="middle";for(var o=0;o<e.labels.length;o++){if(t.scaleShowLabels){if(t.yAxisLeft){n.textAlign="right";n.fillTextMultiLine(fmtChartJS(t,e.labels[o],t.fmtXLabel),p-(t.scaleTickSizeLeft+t.yAxisSpaceRight),d-(o+1)*i+v/2,n.textBaseline,t.scaleFontSize)}if(t.yAxisRight){n.textAlign="left";n.fillTextMultiLine(fmtChartJS(t,e.labels[o],t.fmtXLabel),p+g.availableWidth+(t.scaleTickSizeRight+t.yAxisSpaceRight),d-(o+1)*i+v/2,n.textBaseline,t.scaleFontSize)}}}}function N(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;var i=new Array(e.datasets.length);var s=new Array(e.datasets.length);for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){var l=a;var c=0;if(!(typeof e.datasets[0].data[f]=="undefined")){c+=1*e.datasets[0].data[f];if(c>n){n=c}if(c<r){r=c}}while(l>0){if(!(typeof e.datasets[l].data[f]=="undefined")){c+=1*e.datasets[l].data[f];if(c>n){n=c}if(c<r){r=c}}l--}}}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;if(Math.abs(n-r)<1e-8){n=Max([n*2,1]);r=0}var h=Math.floor(u/(o*.66));var p=Math.floor(u/o*.5);return{maxValue:n,minValue:r,maxSteps:h,minSteps:p}}var r,i,s,o,u,a,f,l,c,h,p,d,v,m=0,g;if(t.reverseOrder){e=reverseData(e)}if(typeof n.ChartNewId=="undefined"){var y=new Date;var b=y.getTime();n.ChartNewId="HorizontalStackedBar_"+b}if(!dynamicFunction(e,t,n,"HorizontalStackedBar"))return;t.logarithmic=false;if(typeof jsGraphAnnotate[n.ChartNewId]=="undefined")jsGraphAnnotate[n.ChartNewId]=new Array;else if(!t.multiGraph)clearAnnotate(n.ChartNewId);defMouse(n,e,t,"HorizontalStackedBar");setRect(n,t);a=N();f=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){s=calculateScale(t,a.maxSteps,a.minSteps,a.maxValue,a.minValue,f);g=setMeasures(e,t,n,height,width,s.labels,true,true,true,true,true)}else{s={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,labels:[]};for(var w=0;w<s.steps;w++){if(f){s.labels.push(tmpl(f,{value:fmtChartJS(t,1*(t.scaleStartValue+t.scaleStepWidth*(w+1)).toFixed(getDecimalPlaces(t.scaleStepWidth)),t.fmtYLabel)}))}}g=setMeasures(e,t,n,height,width,s.labels,true,true,true,true,true)}g.availableHeight=g.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop;g.availableWidth=g.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight;i=Math.floor(g.availableHeight/e.labels.length);l=Math.floor(g.availableWidth/s.steps);if(l==0||t.fullWidthGraph)l=g.availableWidth/s.steps;g.clrwidth=g.clrwidth-(g.availableWidth-s.steps*l);g.availableWidth=s.steps*l;g.availableHeight=e.labels.length*i;p=g.leftNotUsableSize+t.scaleTickSizeLeft;d=g.topNotUsableSize+g.availableHeight+t.scaleTickSizeTop;v=i-t.scaleGridLineWidth*2-t.barValueSpacing*2-(t.barDatasetSpacing*e.datasets.length-1)-t.barStrokeWidth/2-1;T();animationLoop(t,x,S,n,g.clrx,g.clry,g.clrwidth,g.clrheight,p+g.availableWidth/2,d-g.availableHeight/2,p,d,e);};var Bar=function(data,config,ctx){function drawBars(e){var t,n,r;var i=new Array;var s=new Array;for(var o=0;o<data.datasets.length;o++){for(var u=0;u<data.datasets[o].data.length;u++){i[u]=0;s[u]=0}}for(var o=0;o<data.datasets.length;o++){for(var u=0;u<data.datasets[o].data.length;u++){if(!(typeof data.datasets[o].data[u]=="undefined")){s[u]+=1*data.datasets[o].data[u]}}}ctx.lineWidth=config.barStrokeWidth;for(var o=0;o<data.datasets.length;o++){if(data.datasets[o].type=="Line"){var a={datasets:[],labels:data.labels};a.datasets.push(data.datasets[o]);lineConfig=mergeChartConfig(config,{datasetFill:data.datasets[o].fill});drawLinesDataset(e,a,lineConfig,ctx,offsets,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX+config.barValueSpacing+(barWidth+config.barDatasetSpacing/2+config.barStrokeWidth)*nrOfBars/2,valueHop:valueHop,scaleHop:scaleHop,nbValueHop:data.labels.length,zeroY:zeroY,calculatedScale:calculatedScale});continue}if(e>=1){if(typeof data.datasets[o].title=="string")lgtxt=data.datasets[o].title.trim();else lgtxt=""}for(var u=0;u<data.datasets[o].data.length;u++){var f=animationCorrection(e,data,config,o,u,1).animVal;if(f>1)f=f-1;ctx.fillStyle=config.defaultFillColor;if(typeof data.datasets[o].fillColor=="function"){ctx.fillStyle=data.datasets[o].fillColor("FILLCOLOR",data,config,o,u,f,1*data.datasets[o].data[u])}else if(typeof data.datasets[o].fillColor=="string"){ctx.fillStyle=data.datasets[o].fillColor}else if(typeof data.datasets[o].fillColor=="object"){if(typeof data.datasets[o].fillColor[0]=="string"){ctx.fillStyle=data.datasets[o].fillColor[Min([data.datasets[o].fillColor.length-1,u])]}}ctx.strokeStyle=config.defaultStrokeColor;if(typeof data.datasets[o].strokeColor=="function"){ctx.strokeStyle=data.datasets[o].strokeColor("STROKECOLOR",data,config,o,u,CurrentAnimPc,1*data.datasets[o].data[u])}else if(typeof data.datasets[o].strokeColor=="string"){ctx.strokeStyle=data.datasets[o].strokeColor}else if(typeof data.datasets[o].strokeColor=="object"){if(typeof data.datasets[o].strokeColor[0]=="string"){ctx.strokeStyle=data.datasets[o].strokeColor[Min([data.datasets[o].strokeColor.length-1,u])]}}if(!(typeof data.datasets[o].data[u]=="undefined")){var l=yAxisPosX+config.barValueSpacing+valueHop*u+barWidth*o+config.barDatasetSpacing*o+config.barStrokeWidth*o;var c=f*(calculateOffset(config,1*data.datasets[o].data[u],calculatedScale,scaleHop)-zeroY)+config.barStrokeWidth/2;roundRect(ctx,l,xAxisPosY-zeroY,barWidth,c,config.barShowStroke,config.barBorderRadius);i[u]+=1*data.datasets[o].data[u];if(e>=1){if(typeof data.labels[u]=="string")lgtxt2=data.labels[u].trim();else lgtxt2="";t=xAxisPosY-zeroY;n=xAxisPosY-calculateOffset(config,1*data.datasets[o].data[u],calculatedScale,scaleHop)+config.barStrokeWidth/2;if(t<n){r=t;t=n;n=r}jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",l,t,l+barWidth,n,lgtxt,lgtxt2,1*data.datasets[o].data[u],i[u],s[u],o,u]}}}}if(e>=1&&config.inGraphDataShow){for(var o=0;o<data.datasets.length;o++){for(var u=0;u<data.datasets[o].data.length;u++){i[u]=0}}for(var o=0;o<data.datasets.length;o++){if(typeof data.datasets[o].title=="string")lgtxt=data.datasets[o].title.trim();else lgtxt="";for(var u=0;u<data.datasets[o].data.length;u++){if(data.datasets[o].type=="Line"){continue}if(!(typeof data.datasets[o].data[u]=="undefined")){if(typeof data.labels[u]=="string")lgtxt2=data.labels[u].trim();ctx.save();ctx.textAlign=config.inGraphDataAlign;ctx.textBaseline=config.inGraphDataVAlign;ctx.font=config.inGraphDataFontStyle+" "+config.inGraphDataFontSize+"px "+config.inGraphDataFontFamily;ctx.fillStyle=config.inGraphDataFontColor;var l=yAxisPosX+config.barValueSpacing+valueHop*u+barWidth*o+config.barDatasetSpacing*o+config.barStrokeWidth*o;t=xAxisPosY-zeroY;n=xAxisPosY-calculateOffset(config,1*data.datasets[o].data[u],calculatedScale,scaleHop)+config.barStrokeWidth/2;ctx.beginPath();var h=0,p=0;if(config.inGraphDataXPosition==1){p=l+config.inGraphDataPaddingX}else if(config.inGraphDataXPosition==2){p=l+barWidth/2+config.inGraphDataPaddingX}else if(config.inGraphDataXPosition==3){p=l+barWidth+config.inGraphDataPaddingX}if(config.inGraphDataYPosition==1){h=xAxisPosY-zeroY-config.inGraphDataPaddingY}else if(config.inGraphDataYPosition==2){h=xAxisPosY-(calculateOffset(config,1*data.datasets[o].data[u],calculatedScale,scaleHop)+config.barStrokeWidth/2)/2-config.inGraphDataPaddingY}else if(config.inGraphDataYPosition==3){h=xAxisPosY-calculateOffset(config,1*data.datasets[o].data[u],calculatedScale,scaleHop)+config.barStrokeWidth/2-config.inGraphDataPaddingY}ctx.translate(p,h);i[u]+=1*data.datasets[o].data[u];var d=tmplbis(config.inGraphDataTmpl,{config:config,v1:fmtChartJS(config,lgtxt,config.fmtV1),v2:fmtChartJS(config,lgtxt2,config.fmtV2),v3:fmtChartJS(config,1*data.datasets[o].data[u],config.fmtV3),v4:fmtChartJS(config,i[u],config.fmtV4),v5:fmtChartJS(config,s[u],config.fmtV5),v6:roundToWithThousands(config,fmtChartJS(config,100*data.datasets[o].data[u]/s[u],config.fmtV6),config.roundPct),v7:fmtChartJS(config,l,config.fmtV7),v8:fmtChartJS(config,t,config.fmtV8),v9:fmtChartJS(config,l+barWidth,config.fmtV9),v10:fmtChartJS(config,n,config.fmtV10),v11:fmtChartJS(config,o,config.fmtV11),v12:fmtChartJS(config,u,config.fmtV12),data:data});ctx.rotate(config.inGraphDataRotate*(Math.PI/180));ctx.fillTextMultiLine(d,0,0,ctx.textBaseline,config.inGraphDataFontSize);ctx.restore()}}}}if(e>=1){if(typeof drawMath=="function"){drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,barWidth:barWidth})}}}function roundRect(e,t,n,r,i,s,o){e.beginPath();e.moveTo(t+o,n);e.lineTo(t+r-o,n);e.quadraticCurveTo(t+r,n,t+r,n);e.lineTo(t+r,n-i+o);e.quadraticCurveTo(t+r,n-i,t+r-o,n-i);e.lineTo(t+o,n-i);e.quadraticCurveTo(t,n-i,t,n-i+o);e.lineTo(t,n);e.quadraticCurveTo(t,n,t+o,n);if(s)e.stroke();e.closePath();e.fill()}function drawScale(){ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY);ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY);ctx.stroke();for(var e=0;e<data.labels.length;e++){ctx.beginPath();ctx.moveTo(yAxisPosX+e*valueHop,xAxisPosY+config.scaleTickSizeBottom);ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;if(config.scaleShowGridLines&&e>0&&e%config.scaleXGridLinesStep==0){ctx.lineTo(yAxisPosX+e*valueHop,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop)}else{ctx.lineTo(yAxisPosX+e*valueHop,xAxisPosY)}ctx.stroke()}ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(yAxisPosX,xAxisPosY+config.scaleTickSizeBottom);ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop);ctx.stroke();for(var t=0;t<calculatedScale.steps;t++){ctx.beginPath();ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY-(t+1)*scaleHop);ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;if(config.scaleShowGridLines&&t%config.scaleYGridLinesStep==0){ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY-(t+1)*scaleHop)}else{ctx.lineTo(yAxisPosX,xAxisPosY-(t+1)*scaleHop)}ctx.stroke()}}function drawLabels(){ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;if(config.xAxisTop||config.xAxisBottom){ctx.textBaseline="top";if(msr.rotateLabels>90){ctx.save();ctx.textAlign="left"}else if(msr.rotateLabels>0){ctx.save();ctx.textAlign="right"}else{ctx.textAlign="center"}ctx.fillStyle=config.scaleFontColor;if(config.xAxisBottom){for(var e=0;e<data.labels.length;e++){ctx.save();if(msr.rotateLabels>0){ctx.translate(yAxisPosX+e*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos);ctx.rotate(-(msr.rotateLabels*(Math.PI/180)));ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),0,0,ctx.textBaseline,config.scaleFontSize)}else{ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),yAxisPosX+e*valueHop+valueHop/2,msr.xLabelPos,ctx.textBaseline,config.scaleFontSize)}ctx.restore()}}}ctx.textAlign="right";ctx.textBaseline="middle";for(var t=config.showYAxisMin?-1:0;t<calculatedScale.steps;t++){if(config.scaleShowLabels){if(config.yAxisLeft){ctx.textAlign="right";ctx.fillTextMultiLine(calculatedScale.labels[t+1],yAxisPosX-(config.scaleTickSizeLeft+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)}if(config.yAxisRight){ctx.textAlign="left";ctx.fillTextMultiLine(calculatedScale.labels[t+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)}}}}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation;var mathValueHeight=0;if(typeof eval(mathFctName)=="function"){var parameter={data:data,datasetNr:i};mathValueHeight=window[mathFctName](parameter)}for(var j=0;j<data.datasets[i].data.length;j++){if(1*data.datasets[i].data[j]+mathValueHeight>upperValue){upperValue=1*data.datasets[i].data[j]+mathValueHeight}if(1*data.datasets[i].data[j]-mathValueHeight<lowerValue){lowerValue=1*data.datasets[i].data[j]-mathValueHeight}}}if(Math.abs(upperValue-lowerValue)<1e-8){upperValue=Max([upperValue*2,1]);lowerValue=0}if(!isNaN(config.graphMin))lowerValue=config.graphMin;if(!isNaN(config.graphMax))upperValue=config.graphMax;labelHeight=config.scaleFontSize;scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(labelHeight*.66));var minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;var offsets=[];if(typeof ctx.ChartNewId=="undefined"){var cvdate=new Date;var cvmillsec=cvdate.getTime();ctx.ChartNewId="Bar_"+cvmillsec}var nrOfBars=data.datasets.length;var nrOfLines=0;var lineDatasets=[];var barDatasets=[];for(var i=0;i<data.datasets.length;i++){if(data.datasets[i].type=="Line"){nrOfLines++;lineDatasets.push(i)}else{barDatasets.push(i)}}var bufferDataset,l=0;for(var i=data.datasets.length-1;i>=0;i--){if(lineDatasets.indexOf(i)>=0){l++;for(var b=i;b<data.datasets.length-l;b++){bufferDataset=data.datasets[b+1];data.datasets[b+1]=data.datasets[b];data.datasets[b]=bufferDataset}}}nrOfBars-=nrOfLines;if(!dynamicFunction(data,config,ctx,"Bar"))return;if(typeof jsGraphAnnotate[ctx.ChartNewId]=="undefined")jsGraphAnnotate[ctx.ChartNewId]=new Array;else if(!config.multiGraph)clearAnnotate(ctx.ChartNewId);defMouse(ctx,data,config,"Bar");setRect(ctx,config);msr=setMeasures(data,config,ctx,height,width,[""],true,false,true,true,true);valueBounds=getValueBounds();if(config.logarithmic!==false){if(valueBounds.minValue<=0){config.logarithmic=false}}var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));if(config.logarithmic=="fuzzy"&&OrderOfMagnitude<4||config.scaleOverride){config.logarithmic=false}labelTemplateString=config.scaleShowLabels?config.scaleLabel:"";if(!config.scaleOverride){calculatedScale=calculateScale(config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,true,false,true,true,true)}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,graphMax:config.scaleStartValue+config.scaleSteps*config.scaleStepWidth,labels:[]};populateLabels(config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,calculatedScale.graphMax,config.scaleStepWidth);msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,true,false,true,true,true)}msr.availableHeight=msr.availableHeight-config.scaleTickSizeBottom-config.scaleTickSizeTop;msr.availableWidth=msr.availableWidth-config.scaleTickSizeLeft-config.scaleTickSizeRight;scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps);valueHop=Math.floor(msr.availableWidth/data.labels.length);if(valueHop==0||config.fullWidthGraph)valueHop=msr.availableWidth/data.labels.length;msr.clrwidth=msr.clrwidth-(msr.availableWidth-data.labels.length*valueHop);msr.availableWidth=data.labels.length*valueHop;msr.availableHeight=calculatedScale.steps*scaleHop;yAxisPosX=msr.leftNotUsableSize+config.scaleTickSizeLeft;xAxisPosY=msr.topNotUsableSize+msr.availableHeight+config.scaleTickSizeTop;barWidth=(valueHop-config.scaleGridLineWidth*2-config.barValueSpacing*2-(config.barDatasetSpacing*nrOfBars-1)-(config.barStrokeWidth/2*nrOfBars-1))/nrOfBars;var zeroY=0;if(valueBounds.minValue<0){var zeroY=calculateOffset(config,0,calculatedScale,scaleHop)}for(var i=0;i<data.datasets.length;i++){offsets[i]=[];for(var j=0;j<data.datasets[i].data.length;j++){offsets[i][j]=calculateOffset(config,data.datasets[i].data[j],calculatedScale,scaleHop)-zeroY}}drawLabels();animationLoop(config,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data);};var HorizontalBar=function(e,t,n){function E(r){var o=new Array;var u=new Array;for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){o[f]=0;u[f]=0}}for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++)if(!(typeof e.datasets[a].data[f]=="undefined"))u[f]+=1*e.datasets[a].data[f]}n.lineWidth=t.barStrokeWidth;for(var a=0;a<e.datasets.length;a++){if(r>=1){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt=""}for(var f=0;f<e.datasets[a].data.length;f++){var c=animationCorrection(r,e,t,a,f,1).animVal;if(c>1)c=c-1;n.fillStyle=t.defaultFillColor;if(typeof e.datasets[a].fillColor=="function")n.fillStyle=e.datasets[a].fillColor("FILLCOLOR",e,t,a,f,c,1*e.datasets[a].data[f]);else if(typeof e.datasets[a].fillColor=="string"){n.fillStyle=e.datasets[a].fillColor}else if(typeof e.datasets[a].fillColor=="object"){if(typeof e.datasets[a].fillColor[0]=="string"){n.fillStyle=e.datasets[a].fillColor[Min([e.datasets[a].fillColor.length-1,f])]}}n.strokeStyle=t.defaultStrokeColor;if(typeof e.datasets[a].strokeColor=="function")n.strokeStyle=e.datasets[a].strokeColor("STROKECOLOR",e,t,a,f,c,1*e.datasets[a].data[f]);else if(typeof e.datasets[a].strokeColor=="string"){n.strokeStyle=e.datasets[a].strokeColor}else if(typeof e.datasets[a].strokeColor=="object"){if(typeof e.datasets[a].strokeColor[0]=="string"){n.strokeStyle=e.datasets[a].strokeColor[Min([e.datasets[a].strokeColor.length-1,f])]}}if(!(typeof e.datasets[a].data[f]=="undefined")){var h=d+t.barValueSpacing-i*(f+1)+v*a+t.barDatasetSpacing*a+t.barStrokeWidth*a;var m=c*calculateOffset(t,1*e.datasets[a].data[f],s,l)+t.barStrokeWidth/2;S(n,h,p,v,m,t.barShowStroke,t.barBorderRadius,w);o[f]+=1*e.datasets[a].data[f];if(r>=1){if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();else lgtxt2="";t1=p+w;t2=p+calculateOffset(t,1*e.datasets[a].data[f],s,l)+t.barStrokeWidth/2;if(t1>t2){t3=t1;t1=t2;t2=t3}jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["RECT",t1,h+v,t2,h,lgtxt,lgtxt2,1*e.datasets[a].data[f],o[f],u[f],a,f]}}}}if(r>=1&&t.inGraphDataShow){for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){o[f]=0}}for(var a=0;a<e.datasets.length;a++){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt="";for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var h=d+t.barValueSpacing-i*(f+1)+v*a+t.barDatasetSpacing*a+t.barStrokeWidth*a;t1=p+w;t2=p+calculateOffset(t,1*e.datasets[a].data[f],s,l)+t.barStrokeWidth/2;if(t1>t2){t3=t1;t1=t2;t2=t3}n.beginPath();var g=0,y=0;if(t.inGraphDataYPosition==1){g=h-t.inGraphDataPaddingY+v}else if(t.inGraphDataYPosition==2){g=h+v/2-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==3){g=h-t.inGraphDataPaddingY}if(t.inGraphDataXPosition==1){y=p+w+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==2){y=p+(calculateOffset(t,1*e.datasets[a].data[f],s,l)+t.barStrokeWidth/2)/2+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==3){y=p+calculateOffset(t,1*e.datasets[a].data[f],s,l)+t.barStrokeWidth/2+t.inGraphDataPaddingX}n.translate(y,g);o[f]+=1*e.datasets[a].data[f];var b=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[a].data[f],t.fmtV3),v4:fmtChartJS(t,o[f],t.fmtV4),v5:fmtChartJS(t,u[f],t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e.datasets[a].data[f]/u[f],t.fmtV6),t.roundPct),v7:fmtChartJS(t,t1,t.fmtV7),v8:fmtChartJS(t,h+v,t.fmtV8),v9:fmtChartJS(t,t2,t.fmtV9),v10:fmtChartJS(t,h,t.fmtV10),v11:fmtChartJS(t,a,t.fmtV11),v12:fmtChartJS(t,f,t.fmtV12),data:e});n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillTextMultiLine(b,0,0,n.textBaseline,t.inGraphDataFontSize);n.restore()}}}}}function S(e,t,n,r,i,s,o,u){e.beginPath();e.moveTo(n+u,t+o);e.lineTo(n+u,t+r-o);e.quadraticCurveTo(n+u,t+r,n+u,t+r);e.lineTo(n+i-o,t+r);e.quadraticCurveTo(n+i,t+r,n+i,t+r-o);e.lineTo(n+i,t+o);e.quadraticCurveTo(n+i,t,n+i-o,t);e.lineTo(n+u,t);e.quadraticCurveTo(n+u,t,n+u,t+o);if(s)e.stroke();e.closePath();e.fill()}function x(){n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(p-t.scaleTickSizeLeft,d);n.lineTo(p+g.availableWidth+t.scaleTickSizeRight,d);n.stroke();for(var r=t.showYAxisMin?-1:0;r<s.steps;r++){if(r>=0){n.beginPath();n.moveTo(p+r*l,d+t.scaleTickSizeBottom);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&r>0&&r%t.scaleXGridLinesStep==0){n.lineTo(p+r*l,d-g.availableHeight-t.scaleTickSizeTop)}else{n.lineTo(p+r*l,d)}n.stroke()}}n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(p,d+t.scaleTickSizeBottom);n.lineTo(p,d-g.availableHeight-t.scaleTickSizeTop);n.stroke();for(var o=0;o<e.labels.length;o++){n.beginPath();n.moveTo(p-t.scaleTickSizeLeft,d-(o+1)*i);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&o%t.scaleYGridLinesStep==0){n.lineTo(p+g.availableWidth+t.scaleTickSizeRight,d-(o+1)*i)}else{n.lineTo(p,d-(o+1)*i)}n.stroke()}}function T(){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;if(t.xAxisTop||t.xAxisBottom){n.textBaseline="top";if(g.rotateLabels>90){n.save();n.textAlign="left"}else if(g.rotateLabels>0){n.save();n.textAlign="right"}else{n.textAlign="center"}n.fillStyle=t.scaleFontColor;if(t.xAxisBottom){for(var r=t.showYAxisMin?-1:0;r<s.steps;r++){n.save();if(g.rotateLabels>0){n.translate(p+(r+1)*l-g.highestXLabel/2,g.xLabelPos);n.rotate(-(g.rotateLabels*(Math.PI/180)));n.fillTextMultiLine(s.labels[r+1],0,0,n.textBaseline,t.scaleFontSize)}else{n.fillTextMultiLine(s.labels[r+1],p+(r+1)*l,g.xLabelPos,n.textBaseline,t.scaleFontSize)}n.restore()}}}n.textAlign="right";n.textBaseline="middle";for(var o=0;o<e.labels.length;o++){if(t.scaleShowLabels){if(t.yAxisLeft){n.textAlign="right";n.fillTextMultiLine(fmtChartJS(t,e.labels[o],t.fmtXLabel),p-(t.scaleTickSizeLeft+t.yAxisSpaceRight),d-o*i-i/2,n.textBaseline,t.scaleFontSize)}if(t.yAxisRight){n.textAlign="left";n.fillTextMultiLine(fmtChartJS(t,e.labels[o],t.fmtXLabel),p+g.availableWidth+(t.scaleTickSizeRight+t.yAxisSpaceRight),d-o*i-i/2,n.textBaseline,t.scaleFontSize)}}}}function N(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;for(var i=0;i<e.datasets.length;i++){for(var s=0;s<e.datasets[i].data.length;s++){if(1*e.datasets[i].data[s]>n){n=1*e.datasets[i].data[s]}if(1*e.datasets[i].data[s]<r){r=1*e.datasets[i].data[s]}}}if(Math.abs(n-r)<1e-8){n=Max([n*2,1]);r=0}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;var a=Math.floor(u/(o*.66));var f=Math.floor(u/o*.5);return{maxValue:n,minValue:r,maxSteps:a,minSteps:f}}var r,i,s,o,u,a,f,l,c,h,p,d,v,m=0,g;if(t.reverseOrder){e=reverseData(e)}if(typeof n.ChartNewId=="undefined"){var y=new Date;var b=y.getTime();n.ChartNewId="HorizontalBar_"+b}if(!dynamicFunction(e,t,n,"HorizontalBar"))return;if(typeof jsGraphAnnotate[n.ChartNewId]=="undefined")jsGraphAnnotate[n.ChartNewId]=new Array;else if(!t.multiGraph)clearAnnotate(n.ChartNewId);defMouse(n,e,t,"HorizontalBar");setRect(n,t);a=N();f=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){s=calculateScale(t,a.maxSteps,a.minSteps,a.maxValue,a.minValue,f);g=setMeasures(e,t,n,height,width,s.labels,true,true,true,true,true)}else{s={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]};populateLabels(t,f,s.labels,s.steps,t.scaleStartValue,s.graphMax,t.scaleStepWidth);g=setMeasures(e,t,n,height,width,s.labels,true,true,true,true,true)}g.availableHeight=g.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop;g.availableWidth=g.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight;i=Math.floor(g.availableHeight/e.labels.length);l=Math.floor(g.availableWidth/s.steps);if(l==0||t.fullWidthGraph)l=g.availableWidth/s.steps;g.clrwidth=g.clrwidth-(g.availableWidth-s.steps*l);g.availableWidth=s.steps*l;g.availableHeight=e.labels.length*i;p=g.leftNotUsableSize+t.scaleTickSizeLeft;d=g.topNotUsableSize+g.availableHeight+t.scaleTickSizeTop;v=(i-t.scaleGridLineWidth*2-t.barValueSpacing*2-(t.barDatasetSpacing*e.datasets.length-1)-(t.barStrokeWidth/2*e.datasets.length-1))/e.datasets.length;var w=0;if(a.minValue<0){var w=calculateOffset(t,0,s,l)}T();animationLoop(t,x,E,n,g.clrx,g.clry,g.clrwidth,g.clrheight,p+g.availableWidth/2,d-g.availableHeight/2,p,d,e);};var requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var cache={};};
function fmtChartJSPerso(config,value,fmt){var return_value = value;switch(fmt.split(/[\s,]+/)[0].toUpperCase()){default : if(value.length > 17){return_value = value.slice(0,17) + '...';}break;}return(return_value);}